{"version":3,"file":"static/js/39.a78a6aff.chunk.js","mappings":"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","sources":["component/FilterPanel.jsx","component/CheckBox.js","assets/svg/menu-dots.svg","component/TableHeaderSelect.jsx","component/Pagination.js","assets/svg/settings-sliders.svg","assets/svg/rr-edit.svg","assets/svg/br-checkbox.svg","filter/CellFilter.js","util/CellInfo.js","component/Table.jsx","element/Users/ManageUserModal.js","pages/Users.jsx"],"sourcesContent":["/** @jsxImportSource @emotion/react */\r\n// 偷偷告訴 babel 從 @emotion/react 來引入 runtime jsx\r\nimport { jsx } from '@emotion/react'\r\n\r\n// import styled from \"styled-components\";\r\nimport { css } from '@emotion/react'\r\nimport styled from '@emotion/styled'\r\n\r\nimport { filterPanel as layoutThemeObject } from 'theme/reas'\r\n\r\n// import ThemeMixin from 'util/ThemeMixin'\r\nimport { fetchTheme as getTheme, fetchImportStyle } from 'util/ThemeMixin'\r\n\r\nimport LayoutMixin from 'util/LayoutMixin'\r\n\r\nimport PatternStyleMixin from 'util/PatternStyleMixin'\r\n\r\n// const DefaultFilterPanel = ({ children, className }) => {\r\n//     return (<div className={className}>{children}</div>);\r\n// }\r\n\r\nconst FilterPanelStyled = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: flex-start;\r\n    align-items: start;\r\n\r\n    flex-wrap: wrap;\r\n\r\n    /* width: calc(100% - 8rem); */\r\n    width: ${() => LayoutMixin.getPageBoardWidth()};\r\n    margin-left: 1.5rem;\r\n\r\n    background-color: ${getTheme('panel', '#506666')};\r\n\r\n    border-radius: ${getTheme('panelRadius', '3px')};\r\n\r\n    /* padding: 1rem; */\r\n`\r\n\r\nexport default function FilterPanel({ children, pattern }) {\r\n\r\n    const FilterPanelPatternMixin = new PatternStyleMixin('FilterPanel');\r\n\r\n    let patternObj = FilterPanelPatternMixin.getPatternStyle(pattern);\r\n    // console.log('FilterPanel patternObj', patternObj)\r\n\r\n    return (<FilterPanelStyled theme={layoutThemeObject} style={patternObj}\r\n        className=\"filter-panel\">{children}</FilterPanelStyled>)\r\n    // return (<div>{children}</div>)\r\n}\r\n\r\n\r\n// ps. Panel內部無法使用，問題未解決\r\n// const Dash = styled.div`\r\n//     display: flex;\r\n//     justify-content: center;\r\n//     align-items: center;\r\n//     width: '1rem';\r\n//     height: '2.3rem';\r\n//     margin: '0.5rem';\r\n\r\n//     background-color: red;\r\n// `\r\n\r\n// const DashStyle = {\r\n//     display: 'flex',\r\n//     justifyContent: 'center',\r\n//     alignItems: 'center',\r\n//     width: '1rem',\r\n//     height: '2.3rem',\r\n//     margin: '0.5rem',\r\n// };\r\n\r\n\r\nconst DashStyled = styled.div`\r\ndisplay: flex;\r\njustify-content: center;\r\nalign-items: center;\r\n`\r\n\r\n\r\nexport const FilterPanelDash = function FilterPanelDash({ children, pattern = 'query' }) {\r\n\r\n    // let styleObj = Object.assign({}, DashStyle);\r\n\r\n    const FilterPanelCommentPatternStyleMixin = new PatternStyleMixin('FilterPanelDash');\r\n    let patternObj = FilterPanelCommentPatternStyleMixin.getPatternStyle(pattern);\r\n\r\n    if (pattern === 'panelTitle') {\r\n        patternObj = {\r\n            height: \"2.3rem\",\r\n            marginBottom: \"0rem\",\r\n            marginLeft: \"1.5rem\",\r\n            marginRight: \"1.5rem\",\r\n            marginTop: \"0rem\",\r\n        };\r\n        // console.log(`${pattern} patternObj`, patternObj)\r\n    }\r\n\r\n    // <div style={styleObj}>{children}</div>\r\n    return (\r\n        <DashStyled style={patternObj}>{children}</DashStyled>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport const FilterPanelComment = function FilterPanelComment({ children }) {\r\n\r\n    // let styleObj = Object.assign({}, DashStyle);\r\n\r\n    const FilterPanelCommentPatternStyleMixin = new PatternStyleMixin('FilterPanelComment');\r\n    const patternObj = FilterPanelCommentPatternStyleMixin.getPatternStyle('query');\r\n\r\n    // return (\r\n    //     <div style={styleObj}>{children}</div>\r\n    // );\r\n    return (\r\n        <DashStyled style={patternObj}>\r\n        </DashStyled>\r\n    )\r\n}\r\n\r\n\r\nconst FilterPanelTitleStyled = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    \r\n    margin-left: ${fetchImportStyle('marginLeft', '')};\r\n    margin-right: ${fetchImportStyle('marginRight', '')};\r\n    margin-top: ${fetchImportStyle('marginTop', '')};\r\n    margin-bottom: ${fetchImportStyle('marginBottom', '')};\r\n\r\n    .title {\r\n        margin-right: 1rem;\r\n        min-width: ${props => props.titleWidth || 'auto'};\r\n    }\r\n`\r\n\r\nexport const FilterPanelTitle = function ({ children, title, pattern = 'query', titleWidth }) {\r\n    const patternMixin = new PatternStyleMixin('FilterPanelTitle');\r\n    let patternObj = patternMixin.getPatternStyle(pattern);\r\n\r\n    return (\r\n        <FilterPanelTitleStyled patternStyle={patternObj}\r\n            titleWidth={titleWidth}>\r\n            <div className=\"title\">\r\n                {title}\r\n            </div>\r\n            {children}\r\n        </FilterPanelTitleStyled>\r\n    );\r\n}\r\n\r\nexport const FilterPanelTail = function ({ children, pattern }) {\r\n    const patternMixin = new PatternStyleMixin('FilterPanelTail');\r\n    let patternObj = patternMixin.getPatternStyle(pattern);\r\n\r\n    return (\r\n        <FilterPanelTailStyled style={patternObj}>\r\n            {children}\r\n        </FilterPanelTailStyled>\r\n    )\r\n}\r\n\r\nexport const FilterPanelTailStyled = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n\r\n    flex-grow: 1;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n\r\n    \r\n`\r\n","\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport styled from \"styled-components\";\r\nimport { checkBox as themeObject } from 'theme/reas'\r\nimport { checkBox as tableThemeObject } from 'theme/reas'\r\nimport {\r\n    fetchTheme, fetchImportStyle\r\n} from 'util/ThemeMixin'\r\n\r\nimport PatternStyleMixin from 'util/PatternStyleMixin';\r\nconst CheckBoxPatternStyleMixin = new PatternStyleMixin('CheckBox');\r\n\r\nconst DefaultCheckBox = ({ className, value, onUpdate, onClick, disabled }) => {\r\n\r\n\r\n    const handleChange = () => e => {\r\n        // console.log('CheckBox handleChange', !value)\r\n\r\n        // console.log('CheckBox handleChange onUpdate', onUpdate)\r\n        if (onUpdate) {\r\n            onUpdate(!value);\r\n        }\r\n    }\r\n    return (\r\n        <label className={className} onClick={onClick}>\r\n            <input type=\"checkbox\" checked={value} onChange={handleChange()} disabled={disabled} />\r\n            {/* onChange={handleChange()} */}\r\n            <span className=\"checkmark\"></span>\r\n        </label>\r\n    );\r\n}\r\n\r\n/* 舊版的\r\n\r\nconst DefaultCheckBox = ({ className, value, onUpdate, onClick, disabled }) => {\r\n\r\n    // const [toggleChecked, setToggleChecked] = useState(true);\r\n\r\n    const handleChange = () => () => {\r\n        if (onUpdate) {\r\n            onUpdate(!value);\r\n        }\r\n    }\r\n\r\n    useEffect(function () {\r\n        console.log('CheckBox value changed', value);\r\n    }, [value])\r\n\r\n    return (\r\n        <label className={className} onClick={onClick}>\r\n            <input type=\"checkbox\" checked={value} onChange={handleChange()} disabled={disabled} />\r\n            <span className=\"checkmark\"></span>\r\n        </label>\r\n    );\r\n} */\r\n\r\nconst DefaultCheckBoxStyled = styled(DefaultCheckBox)`\r\ndisplay: block;\r\nposition: relative;\r\n/* padding-left: 35px; */\r\n/* margin-bottom: 12px; */\r\ncursor: pointer;\r\n-webkit-user-select: none;\r\n-moz-user-select: none;\r\n-ms-user-select: none;\r\nuser-select: none;\r\nwidth: ${fetchImportStyle('width', '25px')}; // 套入真實的大小，讓外部排版正常\r\nheight: ${fetchImportStyle('height', '25px')};\r\n\r\n    /* Hide the browser's default checkbox */\r\n    & input {\r\n        position: absolute;\r\n        opacity: 0;\r\n        cursor: pointer;\r\n        height: 0;\r\n        width: 0;\r\n    }\r\n\r\n    /* Create a custom checkbox */\r\n    .checkmark {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: ${fetchImportStyle('width', '25px')}; // 實際顯示的尺寸\r\n        height: ${fetchImportStyle('height', '25px')};\r\n        background-color: ${fetchTheme('checkBox', '#f2f2f2')};\r\n\r\n        border-radius: ${fetchTheme('checkBoxRadius', '4px')};\r\n        \r\n        /* border: 1px solid #cacaca; */\r\n        border: ${fetchImportStyle('border', 'none')};\r\n    }\r\n\r\n    & input:disabled ~ .checkmark { // 由input觸發， ~ 符號可以操控.checkmark標籤的行為\r\n        background-color: ${fetchTheme('checkBoxDisabled', '#cccccc')};\r\n    }\r\n\r\n    /* On mouse-over, add a grey background color */\r\n    &:hover input ~ .checkmark {\r\n        background-color: ${fetchTheme('checkBoxHover', '#cccccc')};\r\n    }\r\n\r\n    /* When the checkbox is checked, add a blue background */\r\n    & input:checked ~ .checkmark {\r\n        background-color: ${fetchTheme('checkBoxChecked', '#2196F3')};\r\n\r\n        border-radius: ${fetchTheme('checkBoxRadius', '4px')};\r\n    }\r\n\r\n    /* Create the checkmark/indicator (hidden when not checked) */\r\n    .checkmark:after {\r\n        content: \"\";\r\n        position: absolute;\r\n        display: none;\r\n    }\r\n\r\n    /* Show the checkmark when checked */\r\n    & input:checked ~ .checkmark:after {\r\n        display: block;\r\n    }\r\n\r\n    /* Style the checkmark/indicator */\r\n    & .checkmark:after {\r\n        /* left: 9px;\r\n        top: 5px; */\r\n        left: ${fetchImportStyle('left', '9px')};\r\n        top: ${fetchImportStyle('top', '5px')};\r\n        width: 5px;\r\n        height: 10px;\r\n        border: solid ${fetchTheme('checkedSign', 'white')};\r\n        border-width: 0 3px 3px 0; // 用border顯示2個邊，來製作勾勾符號\r\n        -webkit-transform: rotate(45deg);\r\n        -ms-transform: rotate(45deg);\r\n        transform: rotate(45deg);\r\n    }\r\n`\r\n\r\nexport default function CheckBox({ type, value, onUpdate, onClick, disabled, pattern }) {\r\n\r\n    if (type === 'table') {\r\n        return (<DefaultCheckBoxStyled value={value} onUpdate={onUpdate} theme={tableThemeObject} onClick={onClick} disabled={disabled} />)\r\n    }\r\n\r\n    if (type === 'small') {\r\n        const patternStyle = CheckBoxPatternStyleMixin.getPatternStyle('small');\r\n        return (<DefaultCheckBoxStyled patternStyle={patternStyle} value={value}\r\n            onUpdate={onUpdate} theme={themeObject} onClick={onClick} disabled={disabled} />)\r\n    }\r\n\r\n\r\n    const patternStyle = CheckBoxPatternStyleMixin.getPatternStyle(pattern);\r\n\r\n    return (<DefaultCheckBoxStyled value={value} onUpdate={onUpdate} theme={themeObject}\r\n        onClick={onClick} disabled={disabled} patternStyle={patternStyle} />)\r\n}\r\n","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMenuDots(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    width: 512,\n    height: 512,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 42.667,\n    cy: 256,\n    r: 42.667\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 256,\n    cy: 256,\n    r: 42.667\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 469.333,\n    cy: 256,\n    r: 42.667\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMenuDots);\nexport default __webpack_public_path__ + \"static/media/menu-dots.aaa5ba10af2607f30d3b236d2d702056.svg\";\nexport { ForwardRef as ReactComponent };","/** @jsxImportSource @emotion/react */\r\nimport { jsx } from '@emotion/react'\r\n\r\nimport { css } from '@emotion/react'\r\nimport styled from '@emotion/styled'\r\n\r\n// import styled from 'styled-components'\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\n\r\nimport uniqid from 'uniqid';\r\n\r\n// import Button from 'component/Button'\r\n\r\nimport LayerMixin from 'util/LayerMixin'\r\n\r\nimport CheckBox from \"component/CheckBox\"\r\n\r\nimport { fetchTheme as getTheme } from \"util/ThemeMixin\";\r\nimport { dropdownSelect as themeObject } from \"theme/reas\"\r\n// import Mask from './Mask';\r\nimport WindowCall from 'util/WindowCall';\r\n\r\n// let closeHandleCallback;\r\n\r\n// window.onclick = function (event) {\r\n//     // console.log('event.target', event.target.matches('.page-title-layer'))\r\n//     if (!event.target.matches('.table-header-select')) {\r\n//         if (closeHandleCallback) {\r\n//             closeHandleCallback();\r\n//         }\r\n//     }\r\n// }\r\n\r\nconst DefaultDropdownSelect = ({ importStyle, className, qid, itemList,\r\n    onItemChanged, show = false, onShowUpdate, children }) => {\r\n\r\n    const [dropdownShow, setDropdownShow] = useState(false);\r\n\r\n    // if (dropdownShow) {\r\n    //     setDropdownShow(false);\r\n    // }\r\n\r\n    // useEffect(function () {\r\n    //     if (dropdownShow) {\r\n    //         // 開啟時，才掛上去\r\n\r\n    //         // 點擊外部時關閉\r\n    //         WindowCall.registOnClick('DefaultDropdownSelect', function (event) {\r\n    //             console.log(`event.target`, event.target)\r\n    //             if (!event.target.matches('.page-title-layer')) {\r\n    //                 if (dropdownShow) {\r\n    //                     setDropdownShow(false);\r\n    //                 }\r\n    //             }\r\n    //         });\r\n    //     }\r\n    // }, [dropdownShow])\r\n    useEffect(function () {\r\n        WindowCall.autoCloseOnShowChanged('DefaultDropdownSelect',\r\n            dropdownShow, '.table-header-select-button, .dropdown-select-item',\r\n            () => setDropdownShow(false)\r\n        );\r\n\r\n        // if (dropdownShow) {\r\n        //     // 開啟時才掛上去\r\n        //     WindowCall.registOnClick('DefaultDropdownSelect', function (event) {\r\n        //         console.log(`event.target`, event.target);\r\n        //         if (!event.target.matches('.table-header-select-button, .dropdown-select-item')) {\r\n        //             if (dropdownShow) {\r\n        //                 setDropdownShow(false);\r\n        //                 // 處理完畢後刪除，避免之後接觸到已釋放的物件\r\n        //                 // window.onclick = null;\r\n        //                 WindowCall.endWindowCall(); // 代表工作已執行完畢，要呼叫end，清除 window.onclick 上掛載的函式\r\n        //             }\r\n        //         }\r\n        //     });\r\n        // } else {\r\n        //     WindowCall.endWindowCall(); // 代表工作已執行完畢，要呼叫end，清除 window.onclick 上掛載的函式\r\n        // }\r\n    }, [dropdownShow]);\r\n\r\n    // --------------------------------------------------\r\n\r\n    useEffect(function () {\r\n        if (onShowUpdate) {\r\n            onShowUpdate(dropdownShow);\r\n        }\r\n    }, [dropdownShow])\r\n\r\n    useEffect(function () {\r\n        // console.log(`act show`, show)\r\n        setDropdownShow(show)\r\n\r\n    }, [show]);\r\n\r\n    const blockBubble = () => e => {\r\n        // 阻擋泡泡事件\r\n        e.stopPropagation();\r\n    }\r\n\r\n    let itemRowDomList = [];\r\n\r\n    const onDropdownItemClick = (checked, setChecked) => e => {\r\n        // console.log('onDropdownItemClick')\r\n\r\n        // 阻擋泡泡事件\r\n        e.stopPropagation();\r\n\r\n        setChecked(!checked);\r\n    }\r\n\r\n    const checkMap = {};\r\n\r\n    function setItemChecked(setChecked, item, itemIndex, val) {\r\n        setChecked(val);\r\n        onItemChanged(item, itemIndex, val)\r\n    }\r\n\r\n    itemRowDomList = itemList.map((item, itemIndex) => {\r\n\r\n        const [checked, setChecked] = useState(item.value !== undefined ? item.value : true);\r\n\r\n        const setItemCheckedFunc = setItemChecked.bind(null, setChecked, item, itemIndex);\r\n\r\n        checkMap[itemIndex] = {\r\n            item,\r\n            checked,\r\n            setChecked: setItemCheckedFunc,\r\n        };\r\n\r\n        return (\r\n            <div key={`dropdownItem_${itemIndex}`} className={`dropdown-select-item ${checked ? 'item-select' : ''}`} onClick={onDropdownItemClick(checked, setItemCheckedFunc)}>\r\n                <CheckBox value={checked} onUpdate={setItemCheckedFunc} onClick={blockBubble()} />\r\n                <div className=\"item-label\">{item.label}</div>\r\n            </div>\r\n        );\r\n    });\r\n\r\n    // const onMaskClick = () => () => {\r\n    //     // console.log('onMaskClick')\r\n    //     if (dropdownShow) {\r\n    //         setDropdownShow(false);\r\n    //     }\r\n    // }\r\n\r\n    return (<DefaultDropdownSelectStyled theme={themeObject} className=\"table-header-select\" >\r\n        {/* <Button type={type} mode=\"default\" onClick={onDropdownSelectClick()} qid={qid}>{children}</Button> */}\r\n        {/* <Mask show={dropdownShow} onClick={onMaskClick()}\r\n            layer={LayerMixin.dropdownSelect - 1}></Mask> */}\r\n        {children}\r\n        <div className={`dropdown-select-container ${dropdownShow ? 'show' : ''}`}>\r\n            {itemRowDomList}\r\n        </div>\r\n    </DefaultDropdownSelectStyled>);\r\n}\r\n\r\nconst DefaultDropdownSelectStyled = styled.div`\r\nposition: relative;\r\n\r\n    .dropdown-select-container {\r\n        position: absolute;\r\n        display: none;\r\n\r\n        /* position: absolute; */\r\n        z-index: ${props => props.layer || LayerMixin.dropdownSelect};\r\n        \r\n        background-color: #c7c7c7;\r\n\r\n        width: 300px; // 280\r\n        height: 320px; // 308\r\n\r\n        overflow-y: auto;\r\n        overflow-x: hidden;\r\n\r\n        background-color: ${getTheme('dropdown', '#6e95a2')};\r\n\r\n        .dropdown-select-item {\r\n            display: flex;\r\n            flex-direction: row;\r\n\r\n            justify-content: flex-start;\r\n            align-items: center;\r\n\r\n            height: 3rem;\r\n            width: 100%;\r\n\r\n            flex-shrink: 0;\r\n\r\n            padding: 0 1rem;\r\n            \r\n            .item-label {\r\n                margin-left: 1rem;\r\n                cursor: default;\r\n\r\n                color: ${getTheme('itemText', '#FFFFFF')};\r\n                user-select: none;\r\n            }\r\n        }\r\n        .dropdown-select-item.item-select{\r\n            background-color: ${getTheme('itemSelect', '#6e95a2')};\r\n        }\r\n    }\r\n    .dropdown-select-container.show {\r\n        display: flex;\r\n        flex-direction: column;\r\n    }\r\n    /* width */\r\n    .dropdown-select-container::-webkit-scrollbar {\r\n        width: 14px;\r\n    }\r\n\r\n    /* Track */\r\n    .dropdown-select-container::-webkit-scrollbar-track {\r\n        /* box-shadow: inset 0 0 5px grey; */\r\n        /* background: #d1d1d1; */\r\n        border-radius: 15px;\r\n\r\n        background: transparent;\r\n    }\r\n\r\n    /* Handle */\r\n    .dropdown-select-container::-webkit-scrollbar-thumb {\r\n        /* background: #989898; */\r\n        background-color: ${getTheme('scrollbar', '#cdcdcd')};\r\n\r\n        border-radius: 30px;\r\n        \r\n        border: 3px solid transparent; // 用來縮小thumb的寬度\r\n        background-clip: content-box;\r\n        /* box-shadow: inset 0 0 5px #282828; */\r\n    }\r\n\r\n    /* Handle on hover */\r\n    .dropdown-select-container::-webkit-scrollbar-thumb:hover {\r\n        /* background: #dedede; */\r\n        background-color: ${getTheme('scrollbarHover', '#dedede')};\r\n        border: 3px solid transparent; // 用來縮小thumb的寬度\r\n        background-clip: content-box;\r\n    }\r\n`\r\n\r\nexport default function TableHeaderSelect({ children, importStyle, itemList, onItemChanged, layer, show, onShowUpdate }) {\r\n    return (<DefaultDropdownSelect importStyle={importStyle}\r\n        qid={uniqid()} itemList={itemList} onItemChanged={onItemChanged}\r\n        layer={layer} show={show} onShowUpdate={onShowUpdate}>\r\n        {children}\r\n    </DefaultDropdownSelect>);\r\n}","import styled from \"styled-components\";\r\nimport { useState, useEffect } from 'react';\r\n\r\nimport InputText from \"component/InputText\";\r\n\r\nimport { ReactComponent as MenuDotsSvg } from 'assets/svg/menu-dots.svg'\r\nimport { ReactComponent as AngleLeftSvg } from 'assets/svg/br-angle-left.svg'\r\nimport { ReactComponent as AngleRightSvg } from 'assets/svg/br-angle-right.svg'\r\n\r\nimport { pagination as paginationThemeObject } from 'theme/reas'\r\nimport ThemeMixin, { fetchTheme } from 'util/ThemeMixin'\r\n\r\nconst paginationTheme = new ThemeMixin(paginationThemeObject);\r\n\r\nconst PaginationComponet = ({ className, page, setPage, totalPage, pageChangeLock, onChange }) => {\r\n\r\n    // const setNowPage = (pageNum) => {\r\n    //     setPage(pageNum);\r\n    // }\r\n\r\n    // 文字輸入框的參數\r\n    const [inputTextValue, setInputTextValue] = useState('1');\r\n\r\n    // 鎖定用的參數\r\n    const [lock, setLock] = useState(false);\r\n    function endLock() {\r\n        // console.log('endLock');\r\n        setLock(false);\r\n    }\r\n    const startLock = function () {\r\n        // console.log('startLock');\r\n        setLock(true);\r\n\r\n        setTimeout(function () {\r\n            // 60秒後自動解除(API timeout為60秒)，避免永久鎖定\r\n            setLock(false);\r\n        }, 60000);\r\n    }\r\n\r\n\r\n    // 刷新參數入口\r\n    const pageChange = function (pageNum, eventType) {\r\n        // console.log(`pageChange pageNum: ${pageNum} eventType: ${eventType}`)\r\n\r\n        if (pageNum === page) {\r\n            // 代表與當前頁數相同，不刷新\r\n            return;\r\n        }\r\n\r\n        if (pageChangeLock) {\r\n            // 跳頁鎖定模式: 代表有要使用跳頁鎖定\r\n\r\n            if (lock) {\r\n                // 代表正在鎖定當中，禁止跳頁事件\r\n                // console.log('pagination is locked');\r\n                return;\r\n            }\r\n\r\n            let unlock = endLock.bind(null);\r\n            startLock();\r\n\r\n            // 改數值\r\n            setPage(pageNum);\r\n\r\n            // 會呼叫 <TablePagination> 的 pageChangeEvent\r\n            if (onChange) {\r\n                onChange(pageNum, unlock);\r\n            }\r\n            if (eventType !== 'textInput') {\r\n                // 代表是來自其他來源的事件，要順帶刷新輸入框內的參數\r\n                setInputTextValue(pageNum);\r\n            }\r\n        } else {\r\n            // 一般模式，沒鎖定\r\n\r\n            // 直接改數值\r\n            setPage(pageNum);\r\n\r\n            // 呼叫onChange\r\n            if (onChange) {\r\n                onChange(pageNum);\r\n            }\r\n            if (eventType !== 'textInput') {\r\n                // 代表是來自其他來源的事件，要順帶刷新輸入框內的參數\r\n                setInputTextValue(pageNum);\r\n            }\r\n        }\r\n\r\n\r\n        /*\r\n                // 會呼叫 <TablePagination> 的 setPageEvent\r\n                setPage(pageNum);\r\n        \r\n                if (eventType !== 'textInput') {\r\n                    // 代表是來自其他來源的事件，要順帶刷新輸入框內的參數\r\n                    setInputTextValue(pageNum);\r\n                }\r\n                */\r\n    };\r\n\r\n    // 上下頁icon點擊\r\n    const pageMove = action => () => {\r\n        if (action === 'prev') {\r\n            if ((page - 1) >= 1) {\r\n                pageChange(page - 1, 'moveClick');\r\n            }\r\n        } else if (action === 'later') {\r\n            if ((page + 1) <= totalPage) {\r\n                pageChange(page + 1, 'moveClick');\r\n            }\r\n        }\r\n    }\r\n\r\n    // 點擊頁數\r\n    const onPageNumClick = pageNum => () => {\r\n        pageChange(pageNum, 'numClick');\r\n    }\r\n\r\n    // 數字輸入框跳頁\r\n    const onPageNumJump = () => pageNum => {\r\n        pageChange(pageNum, 'textInput');\r\n    }\r\n\r\n    let pageItemList = [];\r\n\r\n    pageItemList.push(\r\n        <div key=\"arrow-left\" className=\"pagination-item\" onClick={pageMove('prev')}>\r\n            <AngleLeftSvg key=\"arrow-left\" className=\"icon\" alt=\"arrowLeftIcon\"\r\n                fill={paginationTheme.getTheme('arrowIcon', '#040404')} />\r\n        </div>\r\n    );\r\n\r\n    const pushPageNumItem = function (pageNum) {\r\n        pageItemList.push(\r\n            <div key={pageNum} className={`pagination-item ${pageNum === page ? 'active' : ''}`}\r\n                onClick={onPageNumClick(pageNum)}>{`${pageNum}`}</div>\r\n        );\r\n    }\r\n    const pushDotItem = function (dotKey) {\r\n        pageItemList.push(\r\n            <div key={dotKey} className={`pagination-item transparent`}>\r\n                <MenuDotsSvg className=\"icon\" alt=\"dotIcon\"\r\n                    fill={paginationTheme.getTheme('dotIcon', '#040404')} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    if (totalPage <= 8) {\r\n        // 較短的: 全部顯示\r\n        for (let pageNum = 1; pageNum <= totalPage; pageNum += 1) {\r\n            pushPageNumItem(pageNum);\r\n        }\r\n    } else if (totalPage > 8 && page <= 4) {\r\n        // 前段\r\n        for (let pageNum = 1; pageNum <= 4; pageNum += 1) {\r\n            pushPageNumItem(pageNum);\r\n        }\r\n        pushDotItem('middleDot');\r\n        pushPageNumItem(totalPage);\r\n    } else if (totalPage > 8 && (totalPage - 4) <= page) {\r\n        // 後段: 代表已脫離前段，並且逼近尾段\r\n        pushPageNumItem(1);\r\n        pushDotItem('middleDot');\r\n        for (let pageNum = (totalPage - 4); pageNum <= totalPage; pageNum += 1) {\r\n            pushPageNumItem(pageNum);\r\n        }\r\n    } else {\r\n        // 中段\r\n        pushPageNumItem(1);\r\n        pushDotItem('prevDot');\r\n        for (let pageNum = (page - 2); pageNum < (page + 3); pageNum += 1) {\r\n            pushPageNumItem(pageNum);\r\n        }\r\n        pushDotItem('laterDot');\r\n        pushPageNumItem(totalPage);\r\n    }\r\n\r\n    pageItemList.push(\r\n        <div key=\"arrow-right\" className=\"pagination-item\" onClick={pageMove('later')}>\r\n            <AngleRightSvg key=\"arrow-right\" className=\"icon\" alt=\"arrowRightIcon\"\r\n                fill={paginationTheme.getTheme('arrowIcon', '#040404')} />\r\n        </div>\r\n    );\r\n\r\n    pageItemList.push(\r\n        <InputText key=\"pageNumInput\" type=\"pagination\" value={inputTextValue} setValue={setInputTextValue} min={1} max={totalPage} onChange={onPageNumJump()}></InputText>\r\n    );\r\n\r\n    return (\r\n        <div className={className}>\r\n            {pageItemList}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst PaginationStyled = styled(PaginationComponet)`\r\ndisplay: flex;\r\nflex-direction: row;\r\n\r\n    .pagination-item {\r\n        background-color: ${fetchTheme('item', '#72727F')};\r\n        color: ${fetchTheme('itemText', '#24242e')};\r\n        border-radius: ${fetchTheme('itemRadius', '3px')};\r\n        \r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n\r\n        margin: 0.5rem;\r\n\r\n        /* padding: 0.5rem 1rem; */\r\n\r\n        width: 2.5rem;\r\n        height: 2.5rem;\r\n        box-sizing: border-box;\r\n\r\n        cursor: pointer;\r\n        user-select: none;\r\n\r\n        .icon {\r\n            width: 1rem;\r\n            height: 1rem;\r\n            transform: translateY(1px);\r\n        }\r\n    }\r\n    .pagination-item.active {\r\n        background-color: ${fetchTheme('itemActive', '#cbcbe0')}; \r\n        color:  ${fetchTheme('itemTextActive', '#24242e')};\r\n        \r\n        /* border: 2px solid #3e5157; */\r\n\r\n        /* box-shadow: inset 0 0 10px #e2f8f8; */\r\n    }\r\n    .pagination-item.transparent {\r\n        background-color: transparent;\r\n\r\n        cursor: default;\r\n    }\r\n`\r\n\r\nexport default function PaginationEx({ type, page, setPage, totalPage, setTotalPage, pageChangeLock, onChange }) {\r\n    if (type === 'table') {\r\n        return (<PaginationStyled page={page} setPage={setPage}\r\n            totalPage={totalPage} setTotalPage={setTotalPage}\r\n            pageChangeLock={pageChangeLock} onChange={onChange}\r\n            theme={paginationThemeObject}>\r\n        </PaginationStyled>);\r\n    }\r\n\r\n    return (<PaginationStyled></PaginationStyled>);\r\n}","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSettingsSliders(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512.051 512.051\",\n    style: {\n      enableBackground: \"new 0 0 512.051 512.051\"\n    },\n    xmlSpace: \"preserve\",\n    width: 512,\n    height: 512,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.359,101.359h58.368c11.52,42.386,55.219,67.408,97.605,55.888c27.223-7.399,48.489-28.665,55.888-55.888h257.472   c11.782,0,21.333-9.551,21.333-21.333s-9.551-21.333-21.333-21.333H233.22C221.7,16.306,178.001-8.716,135.615,2.804   c-27.223,7.399-48.489,28.665-55.888,55.888H21.359c-11.782,0-21.333,9.551-21.333,21.333S9.577,101.359,21.359,101.359z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M490.692,234.692h-58.368c-11.497-42.38-55.172-67.416-97.552-55.92c-27.245,7.391-48.529,28.674-55.92,55.92H21.359   c-11.782,0-21.333,9.551-21.333,21.333c0,11.782,9.551,21.333,21.333,21.333h257.493c11.497,42.38,55.172,67.416,97.552,55.92   c27.245-7.391,48.529-28.674,55.92-55.92h58.368c11.782,0,21.333-9.551,21.333-21.333   C512.025,244.243,502.474,234.692,490.692,234.692z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M490.692,410.692H233.22c-11.52-42.386-55.219-67.408-97.605-55.888c-27.223,7.399-48.489,28.665-55.888,55.888H21.359   c-11.782,0-21.333,9.551-21.333,21.333c0,11.782,9.551,21.333,21.333,21.333h58.368c11.52,42.386,55.219,67.408,97.605,55.888   c27.223-7.399,48.489-28.665,55.888-55.888h257.472c11.782,0,21.333-9.551,21.333-21.333   C512.025,420.243,502.474,410.692,490.692,410.692z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSettingsSliders);\nexport default __webpack_public_path__ + \"static/media/settings-sliders.9708b279878b2aef7c10520a5b7151e9.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRrEdit(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    id: \"Outline\",\n    viewBox: \"0 0 24 24\",\n    width: 512,\n    height: 512,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.656.93,6.464,13.122A4.966,4.966,0,0,0,5,16.657V18a1,1,0,0,0,1,1H7.343a4.966,4.966,0,0,0,3.535-1.464L23.07,5.344a3.125,3.125,0,0,0,0-4.414A3.194,3.194,0,0,0,18.656.93Zm3,3L9.464,16.122A3.02,3.02,0,0,1,7.343,17H7v-.343a3.02,3.02,0,0,1,.878-2.121L20.07,2.344a1.148,1.148,0,0,1,1.586,0A1.123,1.123,0,0,1,21.656,3.93Z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23,8.979a1,1,0,0,0-1,1V15H18a3,3,0,0,0-3,3v4H5a3,3,0,0,1-3-3V5A3,3,0,0,1,5,2h9.042a1,1,0,0,0,0-2H5A5.006,5.006,0,0,0,0,5V19a5.006,5.006,0,0,0,5,5H16.343a4.968,4.968,0,0,0,3.536-1.464l2.656-2.658A4.968,4.968,0,0,0,24,16.343V9.979A1,1,0,0,0,23,8.979ZM18.465,21.122a2.975,2.975,0,0,1-1.465.8V18a1,1,0,0,1,1-1h3.925a3.016,3.016,0,0,1-.8,1.464Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRrEdit);\nexport default __webpack_public_path__ + \"static/media/rr-edit.c9be44336c026a2e6c4ee005e9fc8c1e.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBrCheckbox(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    id: \"Outline\",\n    viewBox: \"0 0 24 24\",\n    width: 512,\n    height: 512,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,0H5A5.006,5.006,0,0,0,0,5V19a5.006,5.006,0,0,0,5,5H19a5.006,5.006,0,0,0,5-5V5A5.006,5.006,0,0,0,19,0Zm3,19a3,3,0,0,1-3,3H5a3,3,0,0,1-3-3V5A3,3,0,0,1,5,2H19a3,3,0,0,1,3,3Z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.333,15.919,5.414,12A1,1,0,0,0,4,12H4a1,1,0,0,0,0,1.414l3.919,3.919a2,2,0,0,0,2.829,0L20,8.081a1,1,0,0,0,0-1.414h0a1,1,0,0,0-1.414,0Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBrCheckbox);\nexport default __webpack_public_path__ + \"static/media/br-checkbox.66cf1005d431aa2215590bae0457ce3f.svg\";\nexport { ForwardRef as ReactComponent };","\r\nimport Filter, { CustomFilter } from \"./Filter\"\r\n\r\n\r\nconst filterMap = {\r\n    // 範例\r\n    industry: function (industryKey, row, index) {\r\n        const industryMap = {\r\n            catering: '餐飲業',\r\n            warehousing: '倉儲業',\r\n            logistics: '物流業',\r\n            ecommerce: '電商',\r\n            software: '軟體業'\r\n        };\r\n\r\n        return industryMap[industryKey];\r\n    },\r\n    // (舊版)\r\n    // 十位數的逗號: 會找出第一個十位數整數，自動加上逗號\r\n    decimalSeparator: function (text) {\r\n        text = `${text}`;\r\n\r\n        return text.replace(/\\d+/, function (match, capture) {// $0, $1, $2, $3\r\n            // $0: regExp物件中的原始字串\r\n            // $1: index ，相當於indexOf的回傳結果\r\n            // $2: 被拿來replace的原始字串 ex.相當於errOut.\r\n            // $3: 目前不知道幹嘛用\r\n\r\n            // $0: <afeafefa3>\r\n            // $1: 0\r\n            // $2: <afeafefa3>_agentNameI<afeafefa3>nputError\r\n            // $3: undefined\r\n\r\n            // console.log(`match=${match}`);\r\n\r\n            let nowNumStr = match;\r\n            let newNumStr = '';\r\n            while (nowNumStr && (nowNumStr.length - 3) > 0) {\r\n                // console.log(`nowNumStr=${nowNumStr}`);\r\n                let numPartStr = nowNumStr.slice(nowNumStr.length - 3, nowNumStr.length);\r\n\r\n                // console.log(`numPartStr=${numPartStr}`);\r\n\r\n                newNumStr = `,${numPartStr}${newNumStr}`;\r\n\r\n                // 將最後三位數剔除\r\n                nowNumStr = nowNumStr.slice(0, nowNumStr.length - 3)\r\n            }\r\n\r\n            // 代表還有剩餘，把剩餘的也接上\r\n            if (nowNumStr.length !== 0) {\r\n                newNumStr = `${nowNumStr}${newNumStr}`;\r\n            }\r\n\r\n            return newNumStr;\r\n        });\r\n    },\r\n};\r\n\r\nconst digitText = (val, len) => {\r\n    let num = `0000000000000000000000000000000000000000000000000000${val}`;\r\n\r\n    // console.log('digitText num', num);\r\n    // console.log('digitText num str', num.length - len);\r\n    return num.slice(num.length - len, num.length);\r\n};\r\n\r\n\r\nconst timeFilterMap = {\r\n    time: function (isoString) {\r\n        // isoString: '2022-07-19T09:15:16.859Z'\r\n        const d = new Date(isoString);\r\n\r\n        // console.log('time mon', d.getMonth() + 1)\r\n        return `${d.getFullYear()}/${digitText(d.getMonth() + 1, 2)}/${digitText(d.getDate(), 2)}`;\r\n    }\r\n}\r\n\r\nexport default class CellFilter {\r\n\r\n    // Table用來取得欄位的filter函式\r\n    static getFilter(filterKey) {\r\n        if (filterMap[filterKey]) {\r\n            return filterMap[filterKey];\r\n        }\r\n        if (timeFilterMap[filterKey]) {\r\n            return timeFilterMap[filterKey];\r\n        }\r\n\r\n        return null; // 代表沒有找到，不使用filter\r\n    }\r\n    static transformCell(headerItem, row, outText) {\r\n\r\n        if (!headerItem.transform) {\r\n            return outText;\r\n        }\r\n\r\n        // transform: function (row) {\r\n        //     return row.title ? row.title : row.titleDefault;\r\n        // },\r\n\r\n        let transformFunc;\r\n\r\n        if (typeof headerItem.transform === 'function') {\r\n            transformFunc = headerItem.transform;\r\n        }\r\n\r\n        // console.log('transformFunc', transformFunc)\r\n        if (transformFunc) {\r\n            // console.log('transformFunc B', transformFunc)\r\n            return transformFunc(row); // ,new CellInfo // row, headerItem, rowIndex, colIndex\r\n        }\r\n\r\n        console.error(`${headerItem.key} not support transform type`, headerItem.transform);\r\n        return outText;\r\n    }\r\n    static filtCell(headerItem, row, outText) {\r\n\r\n        if (!headerItem.filter) {\r\n            // 代表沒有設定filter\r\n            return outText;\r\n        }\r\n\r\n        let filterFunc;\r\n\r\n        if (typeof headerItem.filter === 'function') {\r\n            // 函式型filter\r\n            filterFunc = headerItem.filter;\r\n        } else if (typeof headerItem.filter === 'string') {\r\n            // 字串型filter\r\n            filterFunc = CellFilter.getFilter(headerItem.filter);\r\n        } else if (headerItem.filter instanceof Filter ||\r\n            headerItem.filter instanceof CustomFilter\r\n        ) {\r\n            // 代表是Filter物件\r\n            filterFunc = headerItem.filter.filt.bind(headerItem.filter);\r\n        }\r\n\r\n        if (filterFunc) {\r\n            return filterFunc(outText);\r\n        }\r\n\r\n        console.error(`${headerItem.key} not support filter type`, headerItem.filter);\r\n        return outText;\r\n    }\r\n}","export default class CellInfo {\r\n    row = null;\r\n    headerItem = null;\r\n    rowIndex = null;\r\n    colIndex = null;\r\n    originRow = null;\r\n    rowChecked = null;\r\n    constructor(headerItem, row, rowIndex, colIndex = null, rowChecked) {\r\n        this.row = row;\r\n        this.headerItem = headerItem;\r\n        this.rowIndex = rowIndex;\r\n        this.colIndex = colIndex;\r\n        this.originRow = row.__originRow;\r\n\r\n        this.rowChecked = rowChecked !== undefined ? rowChecked : (row.__rowSelect === true);\r\n        // this.rowChecked = rowChecked;\r\n    }\r\n    getHeaderItem() {\r\n        return this.headerItem;\r\n    }\r\n    getHeaderKey() {\r\n        // console.log('getHeaderKey', this.headerItem)\r\n        return this.headerItem ? this.headerItem.key : '';\r\n    }\r\n    getRowIndex() {\r\n        return this.rowIndex;\r\n    }\r\n    getColIndex() {\r\n        return this.colIndex;\r\n    }\r\n    getRow() {\r\n        return this.row;\r\n    }\r\n    getOriginRow() {\r\n        // console.log('getOriginRow', this.originRow);\r\n        return this.originRow;\r\n    }\r\n    getCellValue() {\r\n        return this.row[this.headerItem.key];\r\n    }\r\n    getRowChecked() {\r\n        return this.rowChecked;\r\n    }\r\n    setRowChecked(checked) {\r\n        this.rowChecked = checked;\r\n    }\r\n}","/** @jsxImportSource @emotion/react */\r\nimport { jsx } from '@emotion/react'\r\n\r\nimport { css } from '@emotion/react'\r\nimport styled from '@emotion/styled'\r\n\r\n// import styled from \"styled-components\";\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\n// import CellFilter from \"filter/CellFilter\"\r\nimport Filter from \"filter/Filter\"\r\n\r\nimport CheckBox from \"component/CheckBox\"\r\nimport ToggleSwitch from 'component/ToggleSwitch';\r\nimport RenderOnce from 'util/RenderOnce';\r\nimport LayoutMixin from 'util/LayoutMixin'\r\n\r\nimport TableHeaderSelect from 'component/TableHeaderSelect';\r\nimport Pagination from 'component/Pagination';\r\nimport Button from 'component/Button'\r\nimport InputText from 'component/InputText'\r\n\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nimport { select as themeObject, table as tableThemeObject } from 'theme/reas'\r\nimport ThemeMixin from 'util/ThemeMixin'\r\nimport { fetchTheme as getTheme } from 'util/ThemeMixin'\r\n\r\nimport { ReactComponent as SettingSlidersSvg } from 'assets/svg/settings-sliders.svg'\r\nimport { ReactComponent as EditIconSvg } from 'assets/svg/rr-edit.svg'\r\nimport { ReactComponent as CheckBoxIconSvg } from 'assets/svg/br-checkbox.svg'\r\nimport { ReactComponent as CancelIconSvg } from 'assets/svg/rr-cross-circle.svg'\r\n\r\nimport CellFilter from 'filter/CellFilter';\r\nimport CellInfo from 'util/CellInfo';\r\nimport TableData from 'util/TableData';\r\nimport LayerMixin from 'util/LayerMixin';\r\n\r\nimport uniqid from 'uniqid';\r\nimport Ref from 'model/Ref';\r\nimport { TableSelectModeEnum } from 'enum/Table';\r\nimport TableHeader from 'util/TableHeader';\r\n\r\nconst tableTheme = new ThemeMixin(tableThemeObject);\r\n\r\n\r\n\r\n\r\n\r\n// const getTheme = ThemeMixin.fetchGetTheme();\r\n\r\n\r\nconst TableHeaderBlock = ({ header, showColMap, upperHeaderMap }) => {\r\n\r\n    // console.log('header', header)\r\n    /* header :[{\r\n            label: '',\r\n            key: 'checkBox',\r\n            type: 'checkBox',\r\n        }, {\r\n            label: '用戶名稱',\r\n            key: 'userName',\r\n            type: 'text',\r\n        }, {\r\n            label: '子帳號數',\r\n            key: 'subUserNum',\r\n            type: 'text',\r\n        }, {\r\n            key: 'bindUserNum',\r\n            label: '已綁定用戶數',\r\n            type: 'upperHeader'// 這個欄位會是上層header，不會被算做資料欄\r\n        }, {\r\n            label: 'LINE@', // 已綁定用戶數 - LINE@\r\n            key: 'lineAtUserNum',\r\n            type: 'text',\r\n            upperHeaderRef: 'bindUserNum', // 指定上層的欄位\r\n        }, {\r\n            label: '開通/停用',\r\n            key: 'accountEnable',\r\n            type: '',\r\n        }, {\r\n            label: '操作',\r\n            key: 'action',\r\n            type: 'buttonColumn',\r\n        }]\r\n        */\r\n\r\n    // 1.先確認是否有upperHeader存在，決定要生成2列還是1列\r\n    const upperHeaderExist = header.upperHeader ? Object.keys(header.upperHeader).length !== 0 : false;\r\n\r\n    /* -->移至上層\r\n    // 生成upperHeaderMap\r\n    let upperHeaderMap;\r\n    if (upperHeaderExist) {\r\n        upperHeaderMap = new Map();\r\n        Object.keys(header.upperHeader).forEach((key) => {\r\n            const upperHeaderItem = Object.assign({}, header.upperHeader[key]);\r\n            upperHeaderItem.key = key; // 自動補上key\r\n\r\n            let subHeaderColIndexList = [];\r\n            // 自動計算出底下有幾個header\r\n            const lowerHeaderList = header.header.filter((subItem, colIndex) => {\r\n                if (upperHeaderItem.key === subItem.upperHeaderRef) {\r\n                    subHeaderColIndexList.push(colIndex);\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            upperHeaderItem.subHeaderNum = lowerHeaderList.length;\r\n            upperHeaderItem.lowerHeaderList = lowerHeaderList;\r\n            upperHeaderItem.subHeaderColIndexList = subHeaderColIndexList;\r\n\r\n            upperHeaderMap.set(upperHeaderItem.key, upperHeaderItem);\r\n        });\r\n    }\r\n    */\r\n\r\n    /*\r\n    upperHeader: {\r\n        bindUserNum: { // <key>\r\n            label: '已綁定用戶數',\r\n            type: 'upperHeader'// 這個欄位會是上層header，不會被算做資料欄\r\n        },\r\n    },\r\n    ====>\r\n    upperHeaderMap: {\r\n        bindUserNum: {\r\n            key: 'bindUserNum',\r\n            label: '已綁定用戶數',\r\n            type: 'upperHeader'// 這個欄位會是上層header，不會被算做資料欄\r\n            subHeaderNum: 3,\r\n            lowerHeaderList: [{\r\n                label: 'LINE@', // 已綁定用戶數 - LINE@\r\n                key: 'lineAtUserNum',\r\n                type: 'text',\r\n                upperHeaderRef: 'bindUserNum', // 指定上層的欄位\r\n            }, {\r\n                label: 'FB',\r\n                key: 'fbUserNum',\r\n                type: 'text',\r\n                upperHeaderRef: 'bindUserNum', // 指定上層的欄位\r\n            }, {\r\n                label: 'IG',\r\n                key: 'igUserNum',\r\n                type: 'text',\r\n                upperHeaderRef: 'bindUserNum', // 指定上層的欄位\r\n            }],\r\n            subHeaderColIndexList: [7, 8, 9],\r\n        },\r\n    }\r\n    */\r\n\r\n\r\n    // return (<thead>\r\n    //     <tr>\r\n    //         <th colSpan=\"2\">Month</th>\r\n    //         <th rowSpan=\"2\">Savings for holiday!</th>\r\n    //         <th rowSpan=\"2\">Savings</th>\r\n    //     </tr>\r\n    //     <tr>\r\n    //         <th>Month</th>\r\n    //         <th>Savings</th>\r\n    //     </tr>\r\n    // </thead>);\r\n\r\n    let upperHeaderList = [];\r\n    let hedderList = [];\r\n\r\n\r\n    const getThClassName = (thType, colIndex, colLen) => {\r\n        // console.log('getThClassName', thType, colIndex, colLen)\r\n\r\n        let classNameStr = '';\r\n        if (thType === 'up') {\r\n            classNameStr += 'th-top ';\r\n        }\r\n        if (thType === 'down') {\r\n            classNameStr += 'th-bottom ';\r\n        }\r\n\r\n        if (thType === 'single') {\r\n            classNameStr += 'th-top th-bottom ';\r\n        }\r\n        if (colIndex === 0) {\r\n            classNameStr += 'th-start ';\r\n        }\r\n        if ((colIndex + 1) === colLen) {\r\n            classNameStr += 'th-end ';\r\n        }\r\n        return classNameStr;\r\n    }\r\n\r\n    if (upperHeaderExist) {\r\n\r\n        header.header.forEach((headerItem, colIndex, colArr) => {\r\n            if (headerItem.upperHeaderRef) {\r\n                // 代表是下層的headerItem\r\n\r\n                let showCol = showColMap[colIndex].showCol;\r\n\r\n                // 取得上層header\r\n                const upperHeaderItem = upperHeaderMap.get(headerItem.upperHeaderRef);\r\n                // console.log(`get ${headerItem.upperHeaderRef}:`, upperHeaderItem)\r\n\r\n                if (upperHeaderItem) {\r\n                    // 有取到，代表上層還未塞過\r\n\r\n                    // 處理上層感測連動---------------------------------------------------\r\n\r\n                    // 顯示連動\r\n                    // 1.若下層裡，3個有其中一個是關著的，span要自動變成2\r\n                    // 2.若下層全關了，display才可以是none\r\n\r\n                    // ===>已由上層做掉\r\n\r\n                    // ---------------------------------------------------\r\n\r\n                    // 上層塞一個肥的\r\n                    // colSpan={upperHeaderItem.subHeaderNum}\r\n                    upperHeaderList.push(\r\n                        (<th style={{\r\n                            display: upperHeaderItem.showUpperCol ? 'table-cell' : 'none',\r\n                        }} className={getThClassName('up', colIndex, colArr.length)}\r\n                            key={upperHeaderItem.key}\r\n                            colSpan={upperHeaderItem.upperColSpan}>\r\n                            {upperHeaderItem.label}\r\n                        </th>)\r\n                    );\r\n\r\n                    // 刪除項目，代表已經完成   \r\n                    upperHeaderMap.delete(headerItem.upperHeaderRef);\r\n                }  // else 代表已塞過，不必塞上層\r\n\r\n                // 塞下層\r\n                hedderList.push(\r\n                    (<th style={{\r\n                        display: showCol ? 'table-cell' : 'none',\r\n                        minWidth: headerItem.width ? headerItem.width : undefined,\r\n                    }} className={getThClassName('down', colIndex, colArr.length)} key={headerItem.key}>{headerItem.label}</th>)\r\n                )\r\n            } else {\r\n                // 代表是一般的獨立欄位header\r\n\r\n                // console.log('cccc', getThClassName('single', colIndex, colArr.length))\r\n                // console.log(`showColMap[${colIndex}]`, showColMap)\r\n\r\n                let showCol = showColMap[colIndex].showCol;\r\n\r\n                // 上層塞一個高的\r\n                upperHeaderList.push(\r\n                    (<th style={{\r\n                        display: showCol ? 'table-cell' : 'none',\r\n                        minWidth: headerItem.width ? headerItem.width : undefined,\r\n                    }} className={getThClassName('single', colIndex, colArr.length)} rowSpan=\"2\" key={headerItem.key} >{headerItem.label}</th>)\r\n                );\r\n                // 下層不用塞，因為上層會佔據下層的空間\r\n            }\r\n        });\r\n    } else {\r\n        header.header.forEach((headerItem, colIndex, colArr) => {\r\n\r\n            let showCol = showColMap[colIndex].showCol;\r\n\r\n            // 全塞下層\r\n            hedderList.push(\r\n                (<th style={{\r\n                    display: showCol ? 'table-cell' : 'none',\r\n                    minWidth: headerItem.width ? headerItem.width : undefined,\r\n                }} className={getThClassName('single', colIndex, colArr.length)} key={headerItem.key}>{headerItem.label}</th>)\r\n            )\r\n        });\r\n    }\r\n\r\n    let theadTemplate;\r\n    if (upperHeaderExist) {\r\n        theadTemplate = (\r\n            <thead>\r\n                <tr>\r\n                    {upperHeaderList}\r\n                </tr>\r\n                <tr>\r\n                    {hedderList}\r\n                </tr>\r\n            </thead>\r\n        );\r\n    } else {\r\n        theadTemplate = (\r\n            <thead>\r\n                <tr>\r\n                    {hedderList}\r\n                </tr>\r\n            </thead>\r\n        )\r\n    }\r\n\r\n    return (\r\n        theadTemplate\r\n    )\r\n\r\n\r\n}\r\n\r\nconst TdTextEditable = ({ tdStyle, tdClassName, row, rowIndex, headerItem, colIndex, outText, onEdit, cellInfo }) => {\r\n\r\n    const [showInput, setShowInput] = useState(false);\r\n\r\n    const [tdValueOrigin, setTdValueOrigin] = useState(row[headerItem.key]);\r\n    const [tdValue, setTdValue] = useState(row[headerItem.key]);\r\n\r\n    const blockBubble = () => e => {\r\n        // 阻擋泡泡事件\r\n        e.stopPropagation();\r\n    };\r\n\r\n    const onClickEdit = () => e => {\r\n        e.stopPropagation();\r\n\r\n        setShowInput(true);\r\n    }\r\n\r\n    const callEditEvent = function () {\r\n        // console.log(`callEditEvent`, tdValueOrigin, tdValue);\r\n        if (tdValueOrigin !== tdValue) {\r\n            if (onEdit) {\r\n                // setTdValueOrigin(tdValue); // 不用更新origin，上層會自動刷新\r\n                // onEdit(tdValue, headerItem.key, rowIndex);\r\n                onEdit(tdValue, cellInfo);\r\n            }\r\n        }\r\n    }\r\n\r\n    const onClickOk = () => e => {\r\n        // console.log('onClickOk')\r\n        e.stopPropagation();\r\n        callEditEvent();\r\n        setShowInput(false);\r\n    }\r\n\r\n    const onClickCancel = () => e => {\r\n        e.stopPropagation();\r\n        // callEditEvent();\r\n        setShowInput(false);\r\n    }\r\n\r\n\r\n\r\n    // const onTextInputBlur = () => () => {\r\n    //     // console.log('onTextInputBlur');\r\n\r\n    //     callEditEvent();\r\n    //     setShowInput(false);\r\n    // }\r\n    // onBlur={onTextInputBlur()}\r\n\r\n    // tdStyle = Object.assign(tdStyle, {\r\n    //     display: 'inline-table',\r\n    // })\r\n\r\n    return (<td style={tdStyle} className={`${tdClassName}editable`}>\r\n        <div style={{\r\n            display: !showInput ? 'inline-block' : 'none',\r\n        }} onClick={blockBubble()}>{outText}</div>\r\n        <EditIconSvg style={{\r\n            display: !showInput ? 'inline-block' : 'none',\r\n        }} className=\"td-editable-icon\" fill=\"#d8e3df\" onClick={onClickEdit()} />\r\n        <CancelIconSvg style={{\r\n            display: showInput ? 'inline-block' : 'none',\r\n        }} className=\"td-cancel-icon\" fill=\"#d8e3df\" onClick={onClickCancel()} />\r\n        <InputText type=\"tableCancel\" style={{\r\n            display: showInput ? 'inline-block' : 'none',\r\n        }} pattern=\"tableCell\" value={tdValue} onUpdate={setTdValue}\r\n            onClick={blockBubble()} onEnter={onClickOk()}></InputText>\r\n        <CheckBoxIconSvg style={{\r\n            display: showInput ? 'inline-block' : 'none',\r\n        }} className=\"td-checked-icon\" fill=\"#d8e3df\" onClick={onClickOk()} />\r\n    </td>)\r\n}\r\n\r\nconst TdText = ({ tdStyle, tdClassName, row, rowIndex, headerItem, colIndex, onTdEdit, cellInfo }) => {\r\n    // let outText = row[headerItem.key];\r\n\r\n    // if (headerItem.filter) {\r\n\r\n    //     if (headerItem.filter instanceof Filter) {\r\n    //         // 代表是Filter物件，直接執行該物件\r\n    //         outText = headerItem.filter.filt(outText, row, colIndex);\r\n    //     } else {\r\n    //         // 直接用準備好的filter函式過濾\r\n    //         outText = headerItem.filter(outText, row, colIndex);\r\n    //     }\r\n    // }\r\n\r\n    let outText = row[headerItem.key];\r\n    outText = CellFilter.transformCell(headerItem, row, outText);\r\n    outText = CellFilter.filtCell(headerItem, row, outText);\r\n\r\n    const blockBubble = () => e => {\r\n        // 阻擋泡泡事件\r\n        e.stopPropagation();\r\n    };\r\n\r\n    const openUrlLink = () => e => {\r\n        // 阻擋泡泡事件\r\n        e.stopPropagation();\r\n\r\n        // console.log(`openUrlLink: ${headerItem.linkHeaderRef}`, row)\r\n\r\n        let linkUrl;\r\n        if (headerItem.linkHeaderRef) {\r\n            linkUrl = row[headerItem.linkHeaderRef];\r\n        }\r\n        if (linkUrl) {// 開新視窗\r\n            window.open(linkUrl, '_blank');\r\n        } else {\r\n            console.error('linkUrl get fail');\r\n        }\r\n    };\r\n\r\n    // 將不合法的outText資料格式過濾掉\r\n    if (typeof outText === 'object') {\r\n        if (outText) {\r\n            console.error(`outText invalid: value of header ${headerItem.key} is object`, outText)\r\n            outText = '{}';\r\n        }\r\n    }\r\n\r\n    if (headerItem.textType === 'urlLink') {\r\n        return (<td style={tdStyle} className={`${tdClassName}url-link`}>\r\n            <div onClick={openUrlLink()}>{outText}</div>\r\n        </td>)\r\n    }\r\n\r\n    // if (headerItem.editable) {\r\n    if (headerItem.textType === 'editable') {\r\n        // 代表該欄位可編輯\r\n        return (<TdTextEditable tdStyle={tdStyle} tdClassName={tdClassName} row={row} rowIndex={rowIndex}\r\n            headerItem={headerItem} colIndex={colIndex} outText={outText} onEdit={onTdEdit} cellInfo={cellInfo}></TdTextEditable>)\r\n    }\r\n\r\n    return (<td style={tdStyle} className={tdClassName}>\r\n        <div onClick={blockBubble()}>{outText}</div>\r\n    </td>)\r\n}\r\n\r\n// 舊版\r\nconst TdCheckBoxOld = ({ tdStyle, className, value, onUpdate, onClick, disabled, onCheckedUpdate }) => {\r\n\r\n    // useEffect(function () {\r\n    //     console.log(`TdCheckBox value changed`, value);\r\n    // }, [value]);\r\n\r\n    const handleUpdate = () => value => {\r\n        // console.log('TdCheckBox handleUpdate', value);\r\n\r\n        if (onUpdate) {\r\n            onUpdate(value);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <td style={tdStyle} className={className}>\r\n            <div className=\"td-container\">\r\n                <CheckBox type=\"table\" value={value} onUpdate={handleUpdate()} onClick={onClick} disabled={disabled} />\r\n            </div>\r\n        </td>\r\n    )\r\n}\r\n\r\nconst TdCheckBox = ({ tdStyle, className, cellInfo, checkMapMap, onCheckedChange,\r\n    tableData, header }) => {\r\n\r\n    const defaultDisabled = false;\r\n    const defaultChecked = cellInfo.getRowChecked();\r\n\r\n    const headerItem = cellInfo.getHeaderItem();\r\n    const rowIndex = cellInfo.getRowIndex();\r\n    const row = cellInfo.getRow();\r\n\r\n    // 自動取得checkMap(若沒有，則自動生成)\r\n    let checkMap = checkMapMap.autoGetCheckMap(headerItem.key);\r\n\r\n    // 自動生成checkBox用的state參數\r\n    const [checked, setChecked] = useState(defaultChecked);\r\n\r\n    // 當tableData改變時，檢查該列的選取參數，更新到checked參數內\r\n    useEffect(function () {\r\n        const row = tableData.getRow(rowIndex);\r\n\r\n        if (!row) {\r\n            // console.error(`TdCheckBox: rowIndex not exist`, rowIndex, row);\r\n            return;\r\n        }\r\n\r\n        // console.log(`chb tableData changed, [${rowIndex}] ->`, row.__rowSelect);\r\n        setChecked(row.__rowSelect === true);\r\n    }, [tableData])\r\n\r\n    // 生成checkBox的disabled\r\n    const [disabled, setDisabled] = useState(defaultDisabled);\r\n\r\n\r\n\r\n\r\n\r\n\r\n    checkMap.set(rowIndex, { // 將參數註冊進去\r\n        checked: checked,\r\n        setChecked: (() => { }), // setCheckedFunc,\r\n        disabled: disabled,\r\n        setDisabled,\r\n    });\r\n\r\n    // ----------------------------------------------------------\r\n\r\n    const value = checked;\r\n\r\n    const handleUpdate = () => value => {\r\n        setChecked(value);\r\n\r\n        // 暫時處理: 將這次異動要勾起的項目，直接設定數值，預測最後輸出的參數\r\n        const cm = new CellMap(checkMap, tableData, headerItem);\r\n        cm.setIndexChecked(rowIndex, value);\r\n\r\n        if (onCheckedChange) {\r\n            onCheckedChange(value,\r\n                new CellInfo(headerItem, row, rowIndex), cm);\r\n        }\r\n    }\r\n\r\n    const blockBubble = () => e => {\r\n        // 阻擋泡泡事件\r\n        e.stopPropagation();\r\n    };\r\n\r\n    return (\r\n        <td style={tdStyle} className={className}>\r\n            <div className=\"td-container\">\r\n                <CheckBox type=\"table\" value={value} onUpdate={handleUpdate()}\r\n                    onClick={blockBubble()} disabled={disabled} />\r\n            </div>\r\n        </td>\r\n    )\r\n}\r\n\r\nconst TdToggleSwitch = ({ tdStyle, cellInfo, tdClassName, value, onUpdate, onCheckedUpdate }) => {\r\n\r\n    const onTogggleUpdate = () => value => {\r\n        if (onUpdate) {\r\n            onUpdate(value);\r\n        }\r\n        if (onCheckedUpdate) {\r\n            onCheckedUpdate(value);\r\n        }\r\n    }\r\n\r\n    const headerItem = cellInfo.getHeaderItem();\r\n\r\n    const row = cellInfo.getRow();\r\n\r\n    const rowIndex = cellInfo.getRowIndex();\r\n\r\n    const blockBubble = () => e => {\r\n        // 阻擋泡泡事件\r\n        e.stopPropagation();\r\n    };\r\n\r\n    return (<td style={tdStyle} className={tdClassName}>\r\n        <ToggleSwitch value={value} onUpdate={onTogggleUpdate()} onClick={blockBubble()} />\r\n    </td>);\r\n}\r\n\r\n\r\nconst TableRow = ({ rowIndex, row, rowHoverIndex, setRowHoverIndex, header,\r\n    onCheckedChange, headerItemList, rowArr, showColMap,\r\n    checkMapMap, trMouseLeaveTimeoutRef, onButtonClick, onTdEdit, onImageClick,\r\n    tableData }) => {\r\n\r\n    // 當checked狀態改變時\r\n    function onCheckedUpdate(value) {\r\n        const { headerItem, row, rowIndex, checkMap } = this;\r\n\r\n        // 暫時處理: 將這次異動要勾起的項目，直接設定數值，預測最後輸出的參數\r\n        // ps.目前尚未使用MVVM模式，來輸出異動後的參數\r\n        const cm = new CellMap(checkMap, tableData, headerItem);\r\n        cm.setIndexChecked(rowIndex, value);\r\n\r\n        console.log('cm', cm)\r\n\r\n        if (onCheckedChange) {\r\n            onCheckedChange(value,\r\n                new CellInfo(headerItem, row, rowIndex)); // , cm\r\n        }\r\n\r\n        /*\r\n        // 暫時處理: 由於這時候所有checked還沒刷新，因此要先停一下\r\n        setTimeout(function () {\r\n            const cm = new CellMap(checkMap, tableData, headerItem)\r\n            // console.log('cm', cm)\r\n            if (onCheckedChange) {\r\n                onCheckedChange(value, new CellInfo(headerItem, row, rowIndex),\r\n                    cm);\r\n            }\r\n        }, 500);\r\n        */\r\n    }\r\n\r\n    let rowSelectChecked = false;\r\n\r\n\r\n    function getTdClassName(colIndex, colLen, rowIndex, rowLen, headerItemType) {\r\n\r\n        let classNameStr = '';\r\n\r\n        if (rowHoverIndex === rowIndex) {\r\n            classNameStr += 'row-hover ';\r\n        }\r\n        if (rowSelectChecked) {\r\n            classNameStr += 'row-select ';\r\n        }\r\n        if (rowIndex === 0) {\r\n            classNameStr += 'tr-start ';\r\n        } else if ((rowIndex + 1) === rowLen) {\r\n            classNameStr += 'tr-end ';\r\n        }\r\n\r\n        // 原本表格不會變動的版本\r\n        if (colIndex === 0) {\r\n            classNameStr += 'td-start ';\r\n        } else if ((colIndex + 1) === colLen) {\r\n            classNameStr += 'td-end ';\r\n        }\r\n\r\n        if (headerItemType === 'text') {\r\n            classNameStr += 'td-text ';\r\n        } else if (headerItemType === 'checkBox') {\r\n            classNameStr += 'td-checkbox ';\r\n        } else if (headerItemType === 'toggleSwitch') {\r\n            classNameStr += 'td-toggle-switch ';\r\n        } else if (headerItemType === 'buttonColumn') {\r\n            classNameStr += 'td-button-column ';\r\n        } else {\r\n            classNameStr += 'td-blank ';\r\n        }\r\n\r\n        return classNameStr;\r\n    }\r\n\r\n\r\n    // 點選該列非文字部分，代表選取該列\r\n    const onRowClick = (row, rowIndex, onCheckedUpdate) => () => {\r\n        if (!header.checkRowSelectEnable()) {\r\n            // 代表沒有設定勾選欄，點選列不需要有反應\r\n            return;\r\n        }\r\n\r\n\r\n        // 列點擊時，會自動抓'_rowSelect'欄位的checkMap來操作\r\n        let rowSelectCheckMap = checkMapMap.getDefaultRowSelectCheckMap();\r\n\r\n        if (rowSelectCheckMap.getRowDisabled(rowIndex)) {\r\n            return; // 代表項目已鎖定，不動作\r\n        }\r\n\r\n        const newChecked = !rowSelectCheckMap.getRowChecked(rowIndex);\r\n        rowSelectCheckMap.setRowChecked(rowIndex, newChecked);\r\n\r\n        // 呼叫上層事件\r\n        if (onCheckedUpdate) {\r\n            onCheckedUpdate(newChecked);\r\n        }\r\n    }\r\n\r\n    const handleTrHover = (type, rowIndex) => () => {\r\n\r\n        if (type === 'enter') {\r\n            setRowHoverIndex(rowIndex);\r\n\r\n            if (trMouseLeaveTimeoutRef.current) {\r\n                clearTimeout(trMouseLeaveTimeoutRef.current);\r\n                trMouseLeaveTimeoutRef.current = null;\r\n            }\r\n        } else if (type === 'leave') {\r\n\r\n            if (trMouseLeaveTimeoutRef.current) {\r\n                return;\r\n            }\r\n\r\n            function handleTrHoverTimeout(rowIndex) {\r\n                setRowHoverIndex(-1)\r\n                trMouseLeaveTimeoutRef.current = null;\r\n            }\r\n\r\n            let timeoutCallback;\r\n\r\n            timeoutCallback = handleTrHoverTimeout.bind(null, rowIndex);\r\n            trMouseLeaveTimeoutRef.current = setTimeout(timeoutCallback, 70)\r\n        }\r\n    }\r\n\r\n\r\n    // 建構所有col----------------------------------------------------------\r\n\r\n    let colList = [];\r\n\r\n    const blockBubble = () => e => {\r\n        // 阻擋泡泡事件\r\n        e.stopPropagation();\r\n    };\r\n\r\n    const genCheckedState = (headerItem, row, rowIndex, defaultChecked = false, defaultDisabled = false) => {\r\n        // console.log('genCheckedState defaultChecked', defaultChecked)\r\n\r\n        // 自動取得checkMap(若沒有，則自動生成)\r\n        let checkMap = checkMapMap.autoGetCheckMap(headerItem.key);\r\n\r\n        // 自動生成checkBox用的state參數\r\n        const [checked, setChecked] = useState(defaultChecked);\r\n\r\n        // 生成checkBox的disabled\r\n        const [disabled, setDisabled] = useState(defaultDisabled);\r\n\r\n        function handleSetChecked(headerItem, checkMap, setChecked, rowIndex, val) {\r\n            // console.log(`setCheckedFunc [${rowIndex}]:`, val);\r\n\r\n            if (headerItem.selectMode === TableSelectModeEnum.single) { // 單選模式\r\n\r\n                checkMap.excludeSetDisabled(rowIndex, val); // 選取=>鎖定其他的；取消=>其他都解鎖\r\n                setChecked(val);\r\n            } else { // 多選模式\r\n                setChecked(val);\r\n            }\r\n        }\r\n\r\n        const setCheckedFunc = handleSetChecked.bind(null, headerItem, checkMap, setChecked, rowIndex);\r\n\r\n        // checkMap[rowIndex] = { // 將參數註冊進去\r\n        //     checked: checked,\r\n        //     setChecked: setCheckedFunc,\r\n        //     disabled: disabled,\r\n        //     setDisabled,\r\n        // };\r\n        checkMap.set(rowIndex, { // 將參數註冊進去\r\n            checked: checked,\r\n            setChecked: setCheckedFunc,\r\n            disabled: disabled,\r\n            setDisabled,\r\n        });\r\n\r\n        // const mountCounterRef = useRef(0);\r\n\r\n        // 綁定感測器\r\n        // useEffect(onCheckedUpdate(mountCounterRef, headerItem, row, rowIndex, checked, checkMap), [checked]);\r\n\r\n        const checkedUpdateFunc = onCheckedUpdate.bind({\r\n            headerItem, row, rowIndex, checkMap\r\n        });\r\n\r\n        return [checked, setCheckedFunc, disabled, setDisabled, checkedUpdateFunc]; // setRerenderChecked\r\n    }\r\n\r\n    const handleButtonClick = (buttonItem, cellInfo) => e => {\r\n        e.stopPropagation();\r\n\r\n        if (!onButtonClick) {\r\n            return;\r\n        }\r\n        onButtonClick(buttonItem.event, cellInfo);\r\n    }\r\n\r\n\r\n    // 生出一個__rowSelct 的 checkedUpdateFunc------------------------------\r\n\r\n    const defaultRowSelectHeaderItem = header.getDefaultRowSelectHeaderItem();\r\n    let rowSelectCheckedUpdateFunc;\r\n\r\n    if (defaultRowSelectHeaderItem) {\r\n        let rowSelectCheckMap = checkMapMap.autoGetCheckMap('__rowSelect');\r\n        rowSelectCheckedUpdateFunc = onCheckedUpdate.bind({\r\n            headerItem: defaultRowSelectHeaderItem, row, rowIndex, checkMap: rowSelectCheckMap\r\n        });\r\n    }\r\n\r\n    // ----------------------------------------------------------------\r\n\r\n    // 跑每一個欄位\r\n    headerItemList.forEach((headerItem, colIndex, colArr) => {\r\n\r\n        const tdClassNameGenFunc = getTdClassName.bind(null, colIndex, colArr.length, rowIndex, rowArr.length, headerItem.type);\r\n\r\n        let showCol = showColMap[colIndex].showCol;\r\n        let tdStyle = {\r\n            display: showCol ? 'table-cell' : 'none',\r\n        };\r\n\r\n        let cellInfo = new CellInfo(headerItem, row, rowIndex, colIndex);\r\n\r\n        // console.log(`build header cellInfo , row`, row)\r\n\r\n        // 載入style相關參數----------------------------\r\n\r\n        if (headerItem.width) {\r\n            tdStyle.minWidth = headerItem.width;\r\n        }\r\n\r\n        if (headerItem.type === 'text') {\r\n            colList.push(\r\n                <TdText tdStyle={tdStyle} tdClassName={tdClassNameGenFunc()}\r\n                    key={`row_${rowIndex}_col_${colIndex}`} row={row} rowIndex={rowIndex} headerItem={headerItem}\r\n                    colIndex={colIndex} onTdEdit={onTdEdit} cellInfo={cellInfo}\r\n                ></TdText>\r\n            );\r\n        } else if (headerItem.type === 'checkBox') {\r\n            colList.push(\r\n                (<TdCheckBox key={`row_${rowIndex}_col_${colIndex}`}\r\n                    tdStyle={tdStyle} className={tdClassNameGenFunc()}\r\n                    cellInfo={cellInfo} checkMapMap={checkMapMap}\r\n                    onCheckedChange={onCheckedChange} tableData={tableData}\r\n                    header={header}\r\n                />)\r\n            );\r\n        } else if (headerItem.type === 'img') {\r\n\r\n            const imgUrl = row[headerItem.key];\r\n\r\n            const onImgClick = cellInfo => e => {\r\n                e.stopPropagation(); // 防止泡泡事件\r\n                if (headerItem.clickable) {\r\n                    if (onImageClick) {\r\n                        onImageClick(cellInfo);\r\n                    }\r\n                }\r\n            }\r\n\r\n            colList.push(\r\n                (<td style={tdStyle} className={tdClassNameGenFunc()} key={`row_${rowIndex}_col_${colIndex}`}>\r\n                    <img style={headerItem.imgStyle} src={imgUrl} alt=\"td_img\"\r\n                        className={headerItem.clickable ? 'image-link' : ''}\r\n                        onClick={onImgClick(cellInfo)}\r\n                    ></img>\r\n                </td>)\r\n            );\r\n        } else if (headerItem.type === 'toggleSwitch') {\r\n\r\n            const [checked, setChecked, disabled, setDisabled, checkedUpdateFunc] = genCheckedState(headerItem, row, rowIndex, cellInfo.getCellValue());\r\n\r\n            colList.push(\r\n                (<TdToggleSwitch key={`row_${rowIndex}_col_${colIndex}`}\r\n                    tdStyle={tdStyle} cellInfo={cellInfo}\r\n                    tdClassName={tdClassNameGenFunc()}\r\n                    value={checked}\r\n                    onUpdate={setChecked}\r\n                    onCheckedUpdate={checkedUpdateFunc}\r\n                />)\r\n            );\r\n        } else if (headerItem.type === 'buttonColumn') {\r\n            /* buttonColumn: { // in header\r\n                action: { // buttonColumnConfig\r\n                    buttonItemList: [{ // buttonItem\r\n                        type: 'button',\r\n                        label: t('bindedUserNum'), // '編輯',\r\n                        event: 'edit',\r\n                        buttonType: 'fill',\r\n                        buttonMode: 'primary',\r\n                        buttonPattern: 'table',\r\n                        visibleChecker: function (rowData) {\r\n                            return true;\r\n                        },\r\n                    }, {\r\n                        type: 'button',\r\n                        label: t('bindedUserNum'), // '模組',\r\n                        event: 'module',\r\n                        buttonType: 'fill',\r\n                        buttonMode: 'primary',\r\n                        buttonPattern: 'table',\r\n                    }],\r\n                }\r\n            }, */\r\n\r\n            let buttonItemList;\r\n            let buttonColumnConfig;\r\n            let btnList = [];\r\n\r\n            if (header.buttonColumn) {\r\n                if (header.buttonColumn[headerItem.key]) {\r\n                    buttonColumnConfig = header.buttonColumn[headerItem.key];\r\n\r\n                    buttonItemList = buttonColumnConfig.buttonItemList.map(item => (item));\r\n                }\r\n            }\r\n\r\n            if (buttonItemList) {\r\n                buttonItemList.forEach((buttonItem, index) => {\r\n                    btnList.push(\r\n                        (\r\n                            <Button key={`buttonColumn_${rowIndex}_${index}`} type={buttonItem.buttonType} mode={buttonItem.buttonMode}\r\n                                pattern={buttonItem.buttonPattern}\r\n                                onClick={handleButtonClick(buttonItem, cellInfo)}>\r\n                                {buttonItem.label}\r\n                            </Button>\r\n                        )\r\n                    );\r\n                })\r\n            }\r\n\r\n            colList.push(\r\n                (<td style={tdStyle} className={tdClassNameGenFunc()} key={`row_${rowIndex}_col_${colIndex}`}>\r\n                    {btnList}\r\n                </td>)\r\n            );\r\n        } else {\r\n            // 無法辨識type，空一格\r\n            colList.push(\r\n                (<td style={tdStyle} className={tdClassNameGenFunc()} key={`row_${rowIndex}_col_${colIndex}`}></td>)\r\n            );\r\n        }\r\n    })\r\n\r\n\r\n\r\n    return (<tr onClick={onRowClick(row, rowIndex, rowSelectCheckedUpdateFunc)}\r\n        onMouseEnter={handleTrHover('enter', rowIndex)}\r\n        onMouseLeave={handleTrHover('leave', rowIndex)}\r\n    >\r\n        {colList}\r\n    </tr>);\r\n}\r\n\r\n\r\n\r\n\r\n// 輸出用onCheckedChange的介面\r\n\r\n// 現在的constructor為暫定，未來若要把CheckMap拔掉，則還要改\r\nclass CellMap {\r\n    cellList = [];\r\n    length = 0;\r\n    constructor(checkMapObj, tableData, headerItem) {\r\n        if (!(checkMapObj instanceof CheckMap)) {\r\n            console.error(`CheckCellMap: obj is not CheckMap`);\r\n            return\r\n        }\r\n        if (!(tableData instanceof TableData)) {\r\n            console.error(`CheckCellMap: tableData is not TableData`);\r\n            return\r\n        }\r\n        // <CheckMap> constructor: 跑每一列的checked狀態\r\n        this.length = checkMapObj.length;\r\n        this.cellList = checkMapObj.map((checkObj, i) => {\r\n            // console.log(`checkMapObj[${i}]`, checkObj);\r\n            // checkObj: {\r\n            //     checked: true,\r\n            //     disabled: false,\r\n            //     setChecked: f()\r\n            //     setDisabled: f()\r\n            // }\r\n            const row = tableData.getRow(i);\r\n            if (!row) {\r\n                console.error('CellMap: row not exist')\r\n                return null;\r\n            }\r\n            // console.log(`i[${i}]`, checkObj.checked)\r\n            return new CellInfo(headerItem, row, i, null, checkObj.checked);\r\n        });\r\n    }\r\n    setIndexChecked(rowIndex, checked) {\r\n        const cellInfoObj = this.get(rowIndex);\r\n        cellInfoObj.setRowChecked(checked);\r\n    }\r\n    [Symbol.iterator]() {\r\n        let index = -1;\r\n        let data = this.cellList;\r\n\r\n        return {\r\n            next: () => ({ value: data[++index], done: !(index in data) })\r\n        };\r\n    }\r\n\r\n    get(i) {\r\n        return this.cellList[i];\r\n    }\r\n    set(i) {\r\n        return this.cellList[i];\r\n    }\r\n    // getCellList() {\r\n    //     return this.cellList;\r\n    // }\r\n\r\n}\r\n\r\n\r\nclass CheckMap {\r\n    // checkObjMap = {};\r\n    // checkObjMap = new Map();\r\n\r\n    /* class Iterator\r\n    _data = {};\r\n\r\n    constructor() {\r\n        this._data = [1, 2, 3, 4];\r\n    }\r\n\r\n    [Symbol.iterator]() {\r\n        var index = -1;\r\n        var data = this._data;\r\n\r\n        return {\r\n            next: () => ({ value: data[++index], done: !(index in data) })\r\n        };\r\n    };\r\n    */\r\n    checkObjMap = {};\r\n    /* {\r\n        0: ..\r\n        1: ..\r\n    } */\r\n    length = 0;\r\n    [Symbol.iterator]() {\r\n        let index = -1;\r\n        let data = this.checkObjMap;\r\n\r\n        // return {\r\n        //     next: () => ({ value: data[++index], done: !(index in data) })\r\n        // };\r\n\r\n\r\n        return {\r\n            next: function () {\r\n                // console.log('export', data[index + 1]);\r\n                // console.log(`next`, index);\r\n                // console.log(`done`, !(index in data));\r\n                // ps.由於index++會導致index先被丟進data，才執行+1，因此++要放前面\r\n                // (index in data) 代表的是「檢查index是否為data的key」，可使用在array或是object上\r\n                return { value: data[++index], done: !(index in data) };\r\n            }\r\n        };\r\n    };\r\n\r\n    /*\r\n    checkObjMap = {\r\n        data: {},\r\n        length: 0,\r\n        [Symbol.iterator]: function () {\r\n            const self = this;\r\n            const length = Object.keys(self.data).length;\r\n\r\n            let index = 0;\r\n            return {\r\n                next: function () {\r\n                    if (index < length) {\r\n                        return {\r\n                            value: self.data[index++],\r\n                            done: false\r\n                        };\r\n                    }\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        },\r\n        set(key, val) {\r\n            this.data[key] = val;\r\n        },\r\n        get(key) {\r\n            return this.data[key];\r\n        }\r\n    }\r\n    */\r\n    /* 物件型迭代器\r\n    testMap = {\r\n        data: ['name:前端小鹿', 'age:18', 'sex:男'],\r\n        [Symbol.iterator]: function () {\r\n            const self = this\r\n            let index = 0;\r\n            return {\r\n                next: function () {\r\n                    if (index < self.data.length) {\r\n                        return {\r\n                            value: self.data[index++],\r\n                            done: false\r\n                        };\r\n                    }\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        }\r\n    }*/\r\n\r\n    set(key, checkObj) {\r\n        this.checkObjMap[key] = checkObj;\r\n        // this.checkObjMap.set(key, checkObj);\r\n        this.length = Object.keys(this.checkObjMap).length;\r\n    }\r\n    get(key) {\r\n        // this.checkObjMap.get(key);\r\n        return this.checkObjMap[key];\r\n    }\r\n\r\n    getRowDisabled(key) {\r\n        const checkObj = this.get(key);\r\n        return checkObj.disabled;\r\n        /* { checked, setChecked, disabled, setDisabled } */\r\n    }\r\n    getRowChecked(key) {\r\n        const checkObj = this.get(key);\r\n        return checkObj.checked;\r\n    }\r\n    setRowChecked(key, value) {\r\n        // console.log('setRowChecked', value)\r\n        const checkObj = this.get(key);\r\n\r\n        // 修改顯示UI上的勾勾狀態\r\n        checkObj.setChecked(value);\r\n    }\r\n    map(filterFunc) {\r\n\r\n        // 自製的enumerate來同步輸出index\r\n        function* enumerate(iterable) {\r\n            let i = -1;\r\n\r\n            for (const val of iterable) {\r\n                // 取出可迭代的容器內的數值val\r\n                yield [++i, val]; // yield: 產出，每次執行\r\n                // i++;\r\n            }\r\n        }\r\n\r\n        // console.log(`map `, this.length);\r\n\r\n        let arr = Array(this.length)\r\n        for (const [i, obj] of enumerate(this)) {\r\n            // console.log(`yield[${i}]`, obj);\r\n            arr[i] = filterFunc(obj, i);\r\n        }\r\n        return arr;\r\n        /* const aa = enumerate(this);\r\n        // 執行next()會得到\r\n        aa.next() ===> { value: .. , done: false } */\r\n    }\r\n    runCheckMapExcludeSelfIndex(selfIndex, callback) {\r\n        const checkMap = this.checkObjMap;\r\n\r\n        Object.keys(checkMap).forEach((checkMapRowIndex) => {\r\n            if (checkMapRowIndex === `${selfIndex}`) {\r\n                // 只有自己不跑\r\n                return;\r\n            }\r\n\r\n            callback(checkMap, checkMapRowIndex);\r\n        });\r\n    };\r\n    excludeSetDisabled(rowIndex, val) {\r\n        this.runCheckMapExcludeSelfIndex(rowIndex, function (checkMap, checkMapRowIndex) {\r\n            // console.log(`checkMapRowIndex: ${checkMapRowIndex}  val: ${val}`)\r\n            checkMap[checkMapRowIndex].setDisabled(val);  // 選取=>鎖定其他的；取消=>其他都解鎖\r\n        });\r\n    }\r\n    resetAllChecked() {\r\n        for (const eachCheckMap of this) {\r\n            /* {\r\n                checked: false,\r\n                disabled: false,\r\n                setChecked: () => { },\r\n                setDisabled: () => { },\r\n            } */\r\n            // console.log('aa checkMap', checkMap)\r\n            eachCheckMap.setChecked(false);\r\n        }\r\n    }\r\n}\r\n\r\nclass CheckMapMap {\r\n    checkMapMap = new Map();\r\n    // checkMapMap.autoGetCheckMap('__rowSelect');\r\n    autoGetCheckMap(headerKey) {\r\n        let checkMap = this.checkMapMap.get(headerKey);\r\n        if (!checkMap) {\r\n            // let newCheckMap = {};\r\n            let newCheckMap = new CheckMap();\r\n            this.checkMapMap.set(headerKey, newCheckMap);\r\n            return newCheckMap;\r\n        }\r\n        return checkMap;\r\n    }\r\n    resetAllCheckMap() {\r\n        this.checkMapMap.forEach((checkMap) => {\r\n            // console.log(`checkMapMap forEach`, checkMap)\r\n\r\n            checkMap.resetAllChecked();\r\n        });\r\n    }\r\n    getDefaultRowSelectCheckMap() {\r\n        // 取得 '__rowSelect' 欄的checkMap\r\n        return this.autoGetCheckMap('__rowSelect');\r\n    }\r\n}\r\n\r\nconst LoadingStyled = styled.div`\r\nheight: 300px;\r\ndisplay: flex;\r\nflex-direction: row;\r\njustify-content: center;\r\nalign-items: center;\r\n\r\n`\r\n\r\nconst TableLoading = ({ loading }) => {\r\n    return (\r\n        <tbody>\r\n            {/* <tr>\r\n                {loading}\r\n            </tr> */}\r\n\r\n            {/* <tr>\r\n                <td>January</td>\r\n                <td>$100</td>\r\n            </tr> */}\r\n            <tr >\r\n                <td rowSpan=\"10\" colSpan=\"100\">\r\n                    <LoadingStyled>\r\n                        <CircularProgress sx={{ color: tableTheme.getTheme('loading', '#477c68') }} />\r\n                    </LoadingStyled>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    )\r\n}\r\n\r\nconst TableBody = ({ header, data, onCheckedChange, showColMap, onButtonClick, onTdEdit, onImageClick, loading = false, checkMapMap }) => {\r\n    // data: <TableData> ==> util/TableData.js\r\n    if (!(data instanceof TableData)) {\r\n        console.error(`TableBody: data is not TableData`);\r\n        return (<div></div>)\r\n    }\r\n\r\n    // 自動加入filter函式\r\n    let headerItemList = header.header.map((headerItem) => {\r\n        headerItem = Object.assign({}, headerItem);\r\n\r\n        // // 自動生成filter ===> 已整合至CellFilter.filtCell\r\n        // if (typeof headerItem.filter === 'string') {\r\n        //     headerItem.filter = CellFilter.getFilter(headerItem.filter);\r\n        // }\r\n\r\n        return headerItem;\r\n    });\r\n\r\n    // const checkMapMap = new CheckMapMap();\r\n\r\n    // 表格預設的列點擊多選-------------------------------------\r\n\r\n    const [rowHoverIndex, setRowHoverIndex] = useState(-1);\r\n    let trMouseLeaveTimeoutRef = useRef(null);\r\n\r\n    let rowList = [];\r\n\r\n    // let tableData = data.getTableData();\r\n    const [tableData, setTableData] = useState(data.getTableData());\r\n\r\n    useEffect(function () {\r\n        // console.log('data changed', data);\r\n        setTableData(data.getTableData());\r\n    }, [data]);\r\n\r\n    tableData.forEach((row, rowIndex, rowArr) => {\r\n        rowList.push(\r\n            (\r\n                <TableRow key={`row_${rowIndex}`} rowIndex={rowIndex} row={row}\r\n                    rowHoverIndex={rowHoverIndex}\r\n                    setRowHoverIndex={setRowHoverIndex}\r\n                    header={header}\r\n                    onCheckedChange={onCheckedChange}\r\n                    headerItemList={headerItemList}\r\n                    rowArr={rowArr} showColMap={showColMap}\r\n                    checkMapMap={checkMapMap}\r\n                    trMouseLeaveTimeoutRef={trMouseLeaveTimeoutRef}\r\n                    onButtonClick={onButtonClick} onTdEdit={onTdEdit}\r\n                    onImageClick={onImageClick}\r\n                    tableData={data}\r\n                ></TableRow>\r\n            )\r\n        );\r\n    });\r\n\r\n    // loading----------------------------------------------\r\n\r\n    const convertLoading = function (loading) {\r\n        if (loading instanceof Ref) {\r\n            return loading.getValue();\r\n        }\r\n        return loading;\r\n    }\r\n\r\n    const [nowLoading, setLoading] = useState(convertLoading(loading))\r\n    let actLoading = setLoading;\r\n    if (loading instanceof Ref) {\r\n        actLoading = loading.reactive('TableBody', setLoading);\r\n    }\r\n    useEffect(function () {\r\n        actLoading(convertLoading(loading));\r\n    }, [loading]); // 綁上感測器: 上層的loading動作時，要進行連動\r\n\r\n    // render-----------------------------------------------------------\r\n\r\n    if (nowLoading) { // loading\r\n        return (\r\n            <TableLoading loading={loading} />\r\n        )\r\n    }\r\n\r\n    return (<tbody>\r\n        {rowList}\r\n    </tbody>);\r\n}\r\n\r\nconst TablePagination = ({ onChange, pageChangeLock, data }) => {\r\n    // data: <TableData> ==> util/TableData.js\r\n\r\n    const [nowPage, setNowPage] = useState(data.getNowPage());\r\n    const [totalPage, setTotalPage] = useState(data.getTotalPage());\r\n\r\n    // 上層刷新data時，要連帶刷新Pagination內的參數\r\n    useEffect(function () {\r\n        // console.log(`TablePagination on data change  nowPage: ${data.getNowPage()}   totalPage:${data.getTotalPage()}  `);\r\n\r\n        setNowPage(data.getNowPage());\r\n        setTotalPage(data.getTotalPage());\r\n    }, [data])\r\n\r\n    const pageChangeEvent = () => (pageNum, unlock) => {\r\n        if (onChange) {\r\n            // 跳onChange事件，通知刷新頁面\r\n            onChange(pageNum, unlock);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"table-pagination-row\">\r\n            <Pagination type=\"table\" page={nowPage} setPage={setNowPage} onChange={pageChangeEvent()} totalPage={totalPage} setTotalPage={setTotalPage} pageChangeLock={pageChangeLock}></Pagination>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nconst TableBlock = ({ header, data, onCheckedChange, onPageChange,\r\n    pageChangeLock, children, onButtonClick, footerSlot, onTdEdit, view = {},\r\n    onImageClick, importStyle, loading }) => {\r\n    // data: <TableData> ==> util/TableData.js\r\n\r\n    if (!data) {\r\n        console.error(`TableBlock: data not exist`);\r\n    }\r\n\r\n    if (!(header instanceof TableHeader)) {\r\n        console.error('TableBlock: header is invalid');\r\n    }\r\n\r\n    const showColList = header.header.map((headerItem, colIndex) => {\r\n\r\n        return {\r\n            key: headerItem.key,\r\n            label: headerItem.label,\r\n            value: true, // 之後要從這裡對接，自動取localStorage\r\n            colIndex: colIndex, // 先將colIndex存下來，避免後面的程序遺失\r\n            headerItem: headerItem,\r\n        };\r\n    })\r\n\r\n    let headerSelectItemList = showColList.filter((item) => {\r\n        const headerItem = item.headerItem;\r\n        if (headerItem.type === 'checkBox' && headerItem.key === '__rowSelect') {\r\n            // 代表是綁定rowSelect的checkBox，不列入選項\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }).map((item) => {\r\n        /* item: {\r\n            colIndex: 10\r\n            key: \"channelUidWechat\"\r\n            label: \"Wechat\"\r\n            value: true\r\n            headerItem: {\r\n                key: \"channelUidWechat\"\r\n                label: \"Wechat\"\r\n                type: \"text\"\r\n                upperHeaderRef: \"channelUid\"\r\n                width: \"120px\"\r\n            }\r\n        } */\r\n\r\n        if (!item.headerItem) {\r\n            return item;\r\n        }\r\n        if (!item.headerItem.upperHeaderRef) {\r\n            return item;\r\n        }\r\n        if (!header.upperHeader) {\r\n            return item;\r\n        }\r\n\r\n        let label = item.label;\r\n        // console.log(`upperHeaderRef: ${item.headerItem.upperHeaderRef}`, header.upperHeader);\r\n        const upperHeader = header.upperHeader[item.headerItem.upperHeaderRef] || {};\r\n        label = `${label}(${upperHeader.label})`;\r\n\r\n        return Object.assign(item, {\r\n            label: label,\r\n        });\r\n    });\r\n    // build showColMap------------------------------------------------------\r\n    const showColMap = {};\r\n    showColList.forEach((showColItem) => {\r\n        const [showCol, setShowCol] = useState(showColItem.value);\r\n        showColMap[showColItem.colIndex] = {\r\n            showCol: showCol,\r\n            setShowCol: setShowCol,\r\n        };\r\n    })\r\n\r\n    const onDropdownItemChanged = () => (item, itemIndex, val) => {\r\n        // console.log(`dropdown item ${item.key} colIndex[${item.colIndex}] changed: ${val}`, item);\r\n\r\n        // 要連動控制欄位顯示/關閉\r\n        const showColObj = showColMap[item.colIndex];\r\n        showColObj.setShowCol(val);\r\n    }\r\n\r\n    // build upperHeaderMap---------------------------------------------------\r\n\r\n    // 1.先確認是否有upperHeader存在，決定要生成2列還是1列\r\n    const upperHeaderExist = header.upperHeader ? Object.keys(header.upperHeader).length !== 0 : false;\r\n\r\n    // 生成upperHeaderMap\r\n    let upperHeaderMap;\r\n    if (upperHeaderExist) {\r\n        upperHeaderMap = new Map();\r\n        Object.keys(header.upperHeader).forEach((key) => {\r\n            const upperHeaderItem = Object.assign({}, header.upperHeader[key]);\r\n            upperHeaderItem.key = key; // 自動補上key\r\n\r\n            let subHeaderColIndexList = [];\r\n            // 自動計算出底下有幾個header\r\n            const lowerHeaderList = header.header.filter((subItem, colIndex) => {\r\n                if (upperHeaderItem.key === subItem.upperHeaderRef) {\r\n                    subHeaderColIndexList.push(colIndex);\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            upperHeaderItem.subHeaderNum = lowerHeaderList.length;\r\n            upperHeaderItem.subHeaderColIndexList = subHeaderColIndexList;\r\n\r\n            upperHeaderMap.set(upperHeaderItem.key, upperHeaderItem);\r\n        });\r\n    }\r\n\r\n    // upperHeaderMap add (showUpperCol, upperColSpan)---------------------------------------------------------------\r\n\r\n    if (upperHeaderMap) {\r\n        upperHeaderMap.forEach((upperHeaderItem, key) => {\r\n\r\n            const [showUpperCol, setShowUpperCol] = useState(true);\r\n            const [upperColSpan, setUpperColSpan] = useState(upperHeaderItem.subHeaderNum);\r\n\r\n            // 生成更新的函式\r\n            function handleSetShowUpperCol(setShowUpperCol, setUpperColSpan, upperHeaderItem, showColMap, updateColIndex, updateShowCol) {\r\n                // updateColIndex, updateShowCol 這二個參數是setShowColCascadeUpper傳下來的\r\n\r\n                // 跑每個下層，確認是否存在\r\n                let upperShow = false;\r\n\r\n                // console.log(updateColIndex, updateColShow);\r\n\r\n                let upperSpanCount = 0;\r\n\r\n                upperHeaderItem.subHeaderColIndexList.forEach((colIndex) => {\r\n\r\n                    if (colIndex === updateColIndex) {\r\n                        // 代表是這次更新的項目，不使用舊資料，用新資料計算\r\n                        if (updateShowCol) {\r\n                            // 只要有一個還顯示著，就會存在\r\n                            upperShow = true;\r\n                            // 上層有幾個，代表有幾格span\r\n                            upperSpanCount += 1;\r\n                        }\r\n                    } else if (showColMap[colIndex].showCol) {\r\n                        // 只要有一個還顯示著，就會存在\r\n                        upperShow = true;\r\n                        // 上層有幾個，代表有幾格span\r\n                        upperSpanCount += 1;\r\n                    }\r\n                });\r\n\r\n                setShowUpperCol(upperShow);\r\n                setUpperColSpan(upperSpanCount);\r\n            }\r\n\r\n            // 將刷新函式存進去\r\n            upperHeaderItem.refreshShowUpperColFunc = handleSetShowUpperCol.bind(null,\r\n                setShowUpperCol, setUpperColSpan, upperHeaderItem, showColMap);\r\n\r\n            // 存下連動的參數\r\n            upperHeaderItem.showUpperCol = showUpperCol;\r\n            upperHeaderItem.setShowUpperCol = setShowUpperCol;\r\n            upperHeaderItem.upperColSpan = upperColSpan;\r\n            upperHeaderItem.setUpperColSpan = setUpperColSpan;\r\n\r\n            // 存回去\r\n            upperHeaderMap.set(key, upperHeaderItem);\r\n\r\n\r\n            // 二次加工下層的setShowCol函式，跑所有下層，對setShowCol再包一層，達成連動呼叫\r\n            upperHeaderItem.subHeaderColIndexList.forEach((colIndex) => {\r\n\r\n                function setShowColCascadeUpper(setShowCol, refreshShowUpperColFunc, updateColIndex, updateShowCol) {\r\n                    // 將原本的setShowCol包起來的函式\r\n                    refreshShowUpperColFunc(updateColIndex, updateShowCol);\r\n                    setShowCol(updateShowCol);\r\n                }\r\n\r\n                showColMap[colIndex].setShowCol = setShowColCascadeUpper.bind(null,\r\n                    showColMap[colIndex].setShowCol, upperHeaderItem.refreshShowUpperColFunc, colIndex);\r\n            });\r\n        });\r\n    }\r\n\r\n    let tablePaginationRow;\r\n\r\n    const checkMapMap = new CheckMapMap();\r\n\r\n    const handlePageChange = () => (...args) => {\r\n        // console.log('handlePageChange args', args);\r\n        // console.log('handlePageChange checkMapMap', checkMapMap);\r\n        checkMapMap.resetAllCheckMap();\r\n\r\n        if (onPageChange) {\r\n            onPageChange(...args);\r\n        }\r\n    }\r\n\r\n    if (data.getPaginationShow()) {\r\n        tablePaginationRow = (<TablePagination onChange={handlePageChange()} data={data}\r\n            pageChangeLock={pageChangeLock}></TablePagination>);\r\n    }\r\n\r\n    const getDisplay = (blockName, defaultVal) => {\r\n        if (view[blockName] === undefined) {\r\n            return defaultVal;\r\n        }\r\n\r\n        return view[blockName] ? defaultVal : 'none';\r\n    }\r\n\r\n    // <div className={`${className} table-container`}>\r\n\r\n    // const importStyle = {\r\n    //     borderRadius: '0px 5px 5px 5px',\r\n    //     marginTop: '0px',\r\n    // }\r\n\r\n    const [tableHeaderSelectShow, setTableHeaderSelectShow] = useState(false);\r\n    // useEffect(function () {\r\n    //     console.log(`tableHeaderSelectShow`, tableHeaderSelectShow);\r\n    // }, [tableHeaderSelectShow])\r\n\r\n    const onHeaderSelectButtonClick = () => () => {\r\n        // console.log('onHeaderSelectButtonClick', tableHeaderSelectShow);\r\n        setTableHeaderSelectShow(!tableHeaderSelectShow);\r\n        // () => setTableHeaderSelectShow(!tableHeaderSelectShow)\r\n    }\r\n    const onHeaderSelectShowUpdate = () => show => {\r\n        // console.log('onHeaderSelectShowUpdate');\r\n        setTableHeaderSelectShow(show);\r\n    }\r\n\r\n    return (\r\n        <TableStyled className=\"table-container\" theme={tableThemeObject} style={importStyle}>\r\n            <div style={{\r\n                display: getDisplay('panel', 'flex'),\r\n            }} className=\"table-panel\">\r\n                {/* importStyle={{\r\n                    marginLeft: '0px',\r\n                    marginTop: '0px',\r\n                    marginBottom: '0px',\r\n                }} */}\r\n                {/* onClick={onDropdownSelectClick()} */}\r\n                {/* 外面放一個參考位置用的div */}\r\n                <div className=\"table-header-select-block\">\r\n                    <TableHeaderSelect\r\n                        itemList={headerSelectItemList} onItemChanged={onDropdownItemChanged()}\r\n                        layer={LayerMixin.tableDropdown} show={tableHeaderSelectShow} onShowUpdate={onHeaderSelectShowUpdate()}>\r\n                        <Button type=\"table\" mode=\"default\" onClick={onHeaderSelectButtonClick()} importClass=\"table-header-select-button\">\r\n                            <SettingSlidersSvg className=\"column-setting-icon\" fill={tableTheme.getTheme('columnSettingIcon', '#a1a1a1')} />\r\n                        </Button>\r\n                    </TableHeaderSelect>\r\n                </div>\r\n                {children}\r\n            </div>\r\n            <div className=\"table-responsive\">\r\n                <table>\r\n                    {/* <colgroup>\r\n                        <col span=\"2\" style={{\r\n                            backgroundColor: 'red',\r\n                        }} />\r\n                        <col style={{\r\n                            backgroundColor: 'yellow',\r\n                        }} />\r\n                    </colgroup> */}\r\n                    <TableHeaderBlock header={header} showColMap={showColMap} upperHeaderMap={upperHeaderMap}></TableHeaderBlock>\r\n                    <TableBody header={header} data={data} onCheckedChange={onCheckedChange}\r\n                        showColMap={showColMap} onButtonClick={onButtonClick} onTdEdit={onTdEdit}\r\n                        onImageClick={onImageClick} loading={loading} checkMapMap={checkMapMap}></TableBody>\r\n                </table>\r\n            </div>\r\n            {tablePaginationRow}\r\n            {/* <TablePagination onChange={onPageChange} data={data} pageChangeLock={pageChangeLock}></TablePagination> */}\r\n            {footerSlot}\r\n        </TableStyled>\r\n    )\r\n}\r\nconst TableStyled = styled.div`\r\n// table-container------------------------------------\r\ndisplay: block;\r\n\r\nmargin-top: 1.5rem;\r\nmargin-left: 1.5rem;\r\nmargin-bottom: 1.5rem;\r\n\r\n// width: calc(100% - 8rem)\r\nwidth: ${() => LayoutMixin.getPageBoardWidth()};\r\n\r\nbackground-color: ${getTheme('tableContainer', '#cba165')};\r\nborder-radius: ${getTheme('tableContainerRadius', '5px')};\r\n\r\n/* background-color: #cb6582; */\r\n\r\n.table-panel{\r\n    /* width: 100%; */\r\n    /* width: calc(100% - 3rem); */\r\n    /* margin: 0.5rem auto; */\r\n    margin: 1.5rem;\r\n\r\n    /* background-color: aquamarine; */\r\n\r\n    display: flex;\r\n    flex-direction: row;\r\n\r\n    .column-setting-icon {\r\n        width: 1rem;\r\n        height: 1rem;\r\n    }\r\n\r\n    & .table-header-select-block {\r\n        position: relative;\r\n    }\r\n}\r\n\r\n.table-responsive {\r\n\r\n    /* display: flex;\r\n    flex-direction: column; */\r\n\r\n    width: calc(100% - 3rem); // 表格寬度從底板向內縮3rem\r\n\r\n    /* max-width: 80%; */\r\n\r\n    overflow: auto;\r\n\r\n    margin: 1rem auto; // 上下1.5rem間格 左右置中\r\n\r\n    /* max-width: 100%; */\r\n\r\n    table {\r\n        display: table;\r\n        border-collapse: separate;\r\n        box-sizing: border-box;\r\n        text-indent: initial;\r\n        border-spacing: 0px; // border之間的間距\r\n        /* border-color: grey; */\r\n\r\n        /* min-width: 90vw; */\r\n\r\n        /* width: 1200px; */\r\n\r\n        /* overflow: auto; */\r\n\r\n\r\n        table-layout: auto;\r\n\r\n        /* // 最外層\r\n        border: 1px solid #96D4D4; */\r\n\r\n        thead {\r\n\r\n            tr {\r\n                th {\r\n                    color: ${getTheme('tableBorder', '#000000')};\r\n                    font-weight: 500;\r\n                    border-left: 1px solid ${getTheme('tableBorder', '#96D4D4')};\r\n\r\n                    /* min-width: 80px; */\r\n                }\r\n                th.th-start {\r\n                    /* border-right: 1px solid #96D4D4; */\r\n                }\r\n                th.th-end {\r\n                    border-right: 1px solid ${getTheme('tableBorder', '#96D4D4')};\r\n                }\r\n                th.th-top {\r\n                    border-top: 1px solid ${getTheme('tableBorder', '#96D4D4')};\r\n                }\r\n                th.th-bottom {\r\n                    border-top: 1px solid ${getTheme('tableBorder', '#96D4D4')};\r\n                    border-bottom: 1px solid ${getTheme('tableBorder', '#96D4D4')};\r\n                }\r\n\r\n            }\r\n        }\r\n        \r\n        tbody {\r\n    \r\n            tr {\r\n                /* border: 1px solid white; */\r\n                td {\r\n                    /* border: 1px solid #96D4D4; */\r\n\r\n                    border-left: 1px solid ${getTheme('tableBorder', '#96D4D4')};\r\n                    border-bottom: 1px solid ${getTheme('tableBorder', '#96D4D4')};\r\n\r\n                    background-color: ${getTheme('table', '#3e5157')};\r\n\r\n                    /* display: flex;\r\n                    align-items: center;\r\n                    justify-content: center; */\r\n\r\n                    /* min-width: 200px; */\r\n                    padding: 0rem 1rem;\r\n                    height: 3rem;\r\n\r\n                    display: table-cell;\r\n                    text-align: center;\r\n                    vertical-align: middle;\r\n\r\n                    .td-container { // checkBox用的\r\n                        display: flex;\r\n                        width: 100%;\r\n                        height: 100%;\r\n\r\n                        justify-content: center;\r\n                        align-items: center;\r\n                    }\r\n                    .td-editable-icon { // TdTextEditable\r\n                        width: 1rem;\r\n                        height: 1rem;\r\n\r\n                        cursor: pointer;\r\n\r\n                        float: right; // 置右\r\n\r\n                        transform: translateY(4px);\r\n                    }\r\n                    .td-cancel-icon { // TdTextEditable\r\n                        width: 1rem;\r\n                        height: 1rem;\r\n\r\n                        cursor: pointer;\r\n\r\n                        float: left; // 置右\r\n\r\n                        transform: translateY(12px);\r\n                    }\r\n                    .td-checked-icon { // TdTextEditable\r\n                        width: 1rem;\r\n                        height: 1rem;\r\n\r\n                        cursor: pointer;\r\n\r\n                        float: right; // 置右\r\n\r\n                        transform: translateY(12px);\r\n                    }\r\n\r\n                    & .image-link { // 代表是可點擊的圖片\r\n                        cursor: pointer;\r\n                    }\r\n                }\r\n                td.editable {\r\n                    display: flex;\r\n                    flex-direction: row;\r\n                }\r\n                td.row-select {\r\n                    background-color: ${getTheme('rowSelectHighlight', '#37bde2')};\r\n                }\r\n                td.row-hover { // 優先權比.row-select高，會後蓋前\r\n                    background-color: ${getTheme('rowHoverHighlight', '#37bde2')};\r\n                }\r\n                td.tr-start {\r\n                    border-top: none;\r\n                }\r\n                td.tr-end {\r\n                    border-bottom: none;\r\n                }\r\n                td.td-start {\r\n                    border-left: none;\r\n                    /* background-color: #37bde2; */\r\n                }\r\n                td.td-end {\r\n                    border-right: none;\r\n                    /* background-color: #37bde2; */\r\n                }\r\n                td.td-text {\r\n                    min-width: 80px;\r\n                    color: ${getTheme('tableText', '#000000')}; // 預設的字顏色\r\n                }\r\n                td.row-select.td-text {\r\n                    color: ${getTheme('tableTextSelect', '#37bde2')}; // 列選取時的顏色\r\n                }\r\n                td.row-hover.td-text {\r\n                    color: ${getTheme('tableTextHover', '#37bde2')}; // 列選取時的顏色\r\n                }\r\n                /* td.td-text:hover{\r\n                    color: ${getTheme('tableTextHover', '#37bde2')};\r\n                } */\r\n                td.td-checkbox {\r\n                    \r\n                }\r\n                td.td-toggle-switch {\r\n                    \r\n                }\r\n                td.td-button-column {\r\n                    min-width: 80px;\r\n\r\n                    /* width: 300px; */\r\n                    display: flex;\r\n                    flex-direction: row;\r\n\r\n                    /* display: inline-block; */\r\n                }\r\n                td.td-blank {\r\n                    \r\n                }\r\n                td.row-select.url-link, td.row-hover.url-link, td.url-link {\r\n                    color: ${getTheme('tableTextLink', 'blue')};\r\n                    cursor: pointer;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/* width */\r\n.table-responsive::-webkit-scrollbar {\r\n    width: 14px;\r\n}\r\n\r\n/* Track */\r\n.table-responsive::-webkit-scrollbar-track {\r\n    /* box-shadow: inset 0 0 5px grey; */\r\n    /* background: #d1d1d1; */\r\n    border-radius: 15px;\r\n\r\n    background: transparent;\r\n}\r\n\r\n/* Handle */\r\n.table-responsive::-webkit-scrollbar-thumb {\r\n    /* background: #989898; */\r\n    background-color: ${getTheme('scrollbar', '#cdcdcd')};\r\n\r\n    border-radius: 30px;\r\n    \r\n    border: 3px solid transparent; // 用來縮小thumb的寬度\r\n    background-clip: content-box;\r\n    /* box-shadow: inset 0 0 5px #282828; */\r\n}\r\n\r\n/* Handle on hover */\r\n.table-responsive::-webkit-scrollbar-thumb:hover {\r\n    /* background: #dedede; */\r\n    background-color: ${getTheme('scrollbarHover', '#dedede')};\r\n    border: 3px solid transparent; // 用來縮小thumb的寬度\r\n    background-clip: content-box;\r\n}\r\n\r\n.table-pagination-row {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    margin: 1rem 0 1rem 0;\r\n}\r\n`\r\n\r\n// export default TableStyled;\r\n\r\nexport default function Table({ header, data, onCheckedChange, onPageChange,\r\n    pageChangeLock, children, onButtonClick, footerSlot, onTdEdit, view, onImageClick,\r\n    importStyle, loading }) {\r\n    // ps.要注意效能問題，可能會重刷太多次TableExport data\r\n\r\n    return (<TableBlock header={header} data={data} onCheckedChange={onCheckedChange}\r\n        onPageChange={onPageChange} pageChangeLock={pageChangeLock}\r\n        onButtonClick={onButtonClick} footerSlot={footerSlot} onTdEdit={onTdEdit}\r\n        view={view} onImageClick={onImageClick} importStyle={importStyle}\r\n        loading={loading}\r\n    >{children}</TableBlock>)\r\n}\r\n\r\n/*\r\nexport const TableTest = () => {\r\n    return (\r\n        <table>\r\n            <colgroup>\r\n                <col span=\"2\" style={{\r\n                    backgroundColor: 'red',\r\n                }} />\r\n                <col style={{\r\n                    backgroundColor: 'yellow',\r\n                }} />\r\n            </colgroup>\r\n            <thead>\r\n                <tr>\r\n                    <th colSpan=\"2\">Month</th>\r\n                    <th rowSpan=\"2\">Savings for holiday!</th>\r\n                    <th rowSpan=\"2\">Savings</th>\r\n                </tr>\r\n                <tr>\r\n                    <th>Month</th>\r\n                    <th>Savings</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>January</td>\r\n                    <td>$100</td>\r\n                    <td>$100</td>\r\n                    <td>$100</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>February</td>\r\n                    <td>$80</td>\r\n                    <td>$100</td>\r\n                    <td>$100</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    );\r\n}\r\n*/","import Modal from 'component/Modal'\r\nimport { useState, useEffect } from 'react';\r\nimport styled from 'styled-components'\r\nimport InputText from 'component/InputText';\r\nimport Button from 'component/Button';\r\nimport Select from 'component/Select'\r\nimport Table from 'component/Table'\r\nimport TableData from 'util/TableData';\r\nimport { fetchTheme } from 'util/ThemeMixin'\r\nimport TableHeader from 'util/TableHeader';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector, useDispatch, connect } from 'react-redux';\r\n\r\nimport {\r\n    selectAccount, selectPassword, selectUserName,\r\n    selectIndustry, selectPhone, selectComment,\r\n    selectAgent, selectSales,\r\n    // selectIndustryOptionList,\r\n    updateAccount, updatePassword, updateUserName,\r\n    updateIndustry, updatePhone, updateComment,\r\n    updateAgent, updateSales,\r\n    selectSystemPermissionList, updateSystemAuthTablePage,\r\n    selectSystemAuthTablePageSize, selectSystemAuthTablePage\r\n} from 'store/user';\r\n\r\nconst ManageUserModal = ({ setOpenModalRef, className, title, onSave,\r\n    modalType, showTab, industryOptionList, industryOptionListLoading }) => { // userFlow, \r\n\r\n    const { t } = useTranslation('users', { keyPrefix: 'manage' });\r\n\r\n    if (!title) {\r\n        title = t('addOrEditUser'); // \"新增/編輯\"\r\n    }\r\n\r\n    if (!setOpenModalRef) {\r\n        setOpenModalRef = () => { }\r\n    }\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const account = useSelector(selectAccount);\r\n    const password = useSelector(selectPassword);\r\n    const userName = useSelector(selectUserName);\r\n    const industry = useSelector(selectIndustry);\r\n    const phone = useSelector(selectPhone);\r\n    const comment = useSelector(selectComment);\r\n    const agent = useSelector(selectAgent);\r\n    const sales = useSelector(selectSales);\r\n\r\n    const setAccount = val => dispatch(updateAccount(val));\r\n    const setPassword = val => dispatch(updatePassword(val));\r\n    const setUserName = val => dispatch(updateUserName(val));\r\n    const setIndustry = val => dispatch(updateIndustry(val));\r\n    const setPhone = val => dispatch(updatePhone(val));\r\n    const setComment = val => dispatch(updateComment(val));\r\n    const setAgent = val => dispatch(updateAgent(val));\r\n    const setSales = val => dispatch(updateSales(val));\r\n\r\n    // const industryOptionListInit = [{\r\n    //     key: 'catering',\r\n    //     label: '餐飲業',\r\n    // }, {\r\n    //     key: 'warehousing',\r\n    //     label: '倉儲業',\r\n    // }, {\r\n    //     key: 'logistics',\r\n    //     label: '物流業',\r\n    // }, {\r\n    //     key: 'ecommerce',\r\n    //     label: '電商',\r\n    // }, {\r\n    //     key: 'software',\r\n    //     label: '軟體業',\r\n    // }];\r\n\r\n    // const [industryOptionList, setIndustryOptionList] = useState([]);\r\n    // const industryOptionList = useSelector(selectIndustryOptionList);\r\n\r\n    // ps.[錯誤的寫法]載api初始化的工作要調至上層，Modal層只能放View的結構\r\n\r\n    // const initIndustryOptionList = function (optionList) {\r\n    //     setIndustryOptionList(optionList);\r\n    // }\r\n    // const onModalOpen = () => () => {\r\n    //     // 在開啟時，都重新去取industryOptionList資料\r\n    //     industryFilter.autoReady(initIndustryOptionList).catch(new ApiError().catchAlertMsg());\r\n    // }\r\n\r\n    // ps.[錯誤的寫法]Modal不可以使用useEffect寫法，因為每次開啟Modal時，都會重新跑一次render\r\n    // 會導致執行完setIndustryOptionList以後，又被render洗回預設值\r\n\r\n    // --->Modal不能這樣寫，因為Modal時常會重新render\r\n    // useEffect(function () {\r\n    //     industryFilter.autoReady(initIndustryOptionList).catch(new ApiError().catchAlertMsg());\r\n    // }, []);\r\n\r\n\r\n    if (!showTab) {\r\n        showTab = 'profile';\r\n    }\r\n    const [tabStatus, setTabStatus] = useState(showTab);\r\n\r\n    useEffect(function () {\r\n        setTabStatus(showTab);\r\n    }, [showTab]);\r\n\r\n    const changeTab = tab => () => {\r\n        setTabStatus(tab);\r\n    }\r\n\r\n    const saveUser = () => () => {\r\n        onSave();\r\n    }\r\n\r\n    // userAuth --------------------------------------------\r\n\r\n    const permisstionTranslation = useTranslation('setting', { keyPrefix: 'defaultAuth' })\r\n    const pt = permisstionTranslation.t;\r\n\r\n    const userAuthTableHeader = new TableHeader({\r\n        header: [{\r\n            label: t('moduleName'), // '名稱',\r\n            key: 'resourceName',\r\n            type: 'text',\r\n            filter: function (resourceName) {\r\n                return pt(resourceName);\r\n            }\r\n            // }, {\r\n            //     label: t('category'), // '類別',\r\n            //     key: 'category',\r\n            //     type: 'text',\r\n            // }, {\r\n            //     label: t('startTime'), // '開始時間',\r\n            //     key: 'startTime',\r\n            //     type: 'text',\r\n            //     filter: 'time',\r\n            // }, {\r\n            //     label: t('endTime'), //  '結束時間',\r\n            //     key: 'endTime',\r\n            //     type: 'text',\r\n            //     filter: 'time',\r\n        }, {\r\n            label: t('accountEnable'), //  '操作權限',\r\n            key: 'enabled',\r\n            type: 'text',\r\n            filter: function (val) {\r\n                return val ? 'ON' : 'OFF';\r\n            }\r\n        }],\r\n    });\r\n\r\n    const systemPermissionList = useSelector(selectSystemPermissionList);\r\n    const systemAuthTablePageSize = useSelector(selectSystemAuthTablePageSize);\r\n    const systemAuthTablePage = useSelector(selectSystemAuthTablePage);\r\n\r\n    // ps.Modal內部只負責管view render，不負責Control，換頁控制丟給Redux去處理\r\n    // 一旦使用Modal，所有參數主導權都放在Redux。\r\n    // Modal內的表格，只依照Redux給的參數進行Render，實現單純的View功能\r\n    const userAuthTableDataInit = {\r\n        page: systemAuthTablePage,\r\n        pageSize: systemAuthTablePageSize,\r\n        data: systemPermissionList,\r\n        // data: [{\r\n        //     moduleName: '訊息推播',\r\n        //     category: '社群管理',\r\n        //     startTime: '2022-07-19T09:15:16.859Z',\r\n        //     endTime: '2022-07-19T09:15:16.859Z',\r\n        //     accountEnable: false,\r\n        // }],\r\n    }\r\n    const userAuthTableData = new TableData(userAuthTableDataInit, 'static');\r\n\r\n    const userAuthTableChange = function (newPage) {\r\n        dispatch(updateSystemAuthTablePage(newPage));\r\n    }\r\n\r\n    // moduleAuth -----------------------------------\r\n\r\n    const moduleAuthTableHeader = new TableHeader({\r\n        header: [{\r\n            label: t('moduleName'), //  '名稱',\r\n            key: 'moduleName',\r\n            type: 'text',\r\n        }, {\r\n            label: t('category'), //  '類別',\r\n            key: 'category',\r\n            type: 'text',\r\n        }, {\r\n            label: t('startTime'), // '開始時間',\r\n            key: 'startTime',\r\n            type: 'text',\r\n            filter: 'time',\r\n        }, {\r\n            label: t('endTime'), // '結束時間',\r\n            key: 'endTime',\r\n            type: 'text',\r\n            filter: 'time',\r\n        }, {\r\n            label: t('accountEnable'), //  '操作權限',\r\n            key: 'accountEnable',\r\n            type: 'toggleSwitch',\r\n        }],\r\n    });\r\n\r\n    const moduleAuthTableDataInit = {\r\n        page: 1,\r\n        totalPage: 1,\r\n        data: [{\r\n            moduleName: '訊息推播',\r\n            category: '社群管理',\r\n            startTime: '2022-07-19T09:15:16.859Z',\r\n            endTime: '2022-07-19T09:15:16.859Z',\r\n            accountEnable: false,\r\n        }],\r\n    }\r\n\r\n    // const [moduleAuthTableData, setModuleAuthTableData] = useState(new TableData(moduleAuthTableDataInit, 'default'));\r\n    const moduleAuthTableData = new TableData(moduleAuthTableDataInit, 'default', moduleAuthTableHeader);\r\n\r\n    // onModalOpen={onModalOpen()}\r\n    return (\r\n        <Modal childRef={ref => (setOpenModalRef(ref))}\r\n            modalWidth={700} modalHeight={700}>\r\n            <div className={className}>\r\n                <div className=\"manage-user-title\">{title}</div>\r\n                <div className=\"manager-user-container\">\r\n                    <div className=\"manager-user-tab-row\">\r\n                        <div className={`manager-user-tab ${tabStatus === 'profile' ? 'active' : ''}`} onClick={changeTab('profile')}>\r\n                            {t('baseInformation')} {/* 基本資料 */}\r\n                        </div>\r\n                        <div className={`manager-user-tab ${tabStatus === 'userAuth' ? 'active' : ''}`} onClick={changeTab('userAuth')}>\r\n                            {t('userAuth')}{/* 用戶權限 */}\r\n                        </div>\r\n                        <div className={`manager-user-tab ${tabStatus === 'moduleAuth' ? 'active' : ''}`} onClick={changeTab('moduleAuth')}>\r\n                            {t('moduleAuth')}{/* 模組權限 */}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"manage-user-profile\" style={{\r\n                        display: tabStatus === 'profile' ? 'flex' : 'none',\r\n                    }}>\r\n                        <div className=\"profile-item-row\">\r\n                            <div className=\"item-title\">\r\n                                {t('account')}{/* 帳號 */}\r\n                            </div>\r\n                            <div className=\"item-content\">\r\n                                <InputText value={account} onUpdate={setAccount}></InputText>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"profile-item-row\">\r\n                            <div className=\"item-title\">\r\n                            </div>\r\n                            <div className=\"item-content\">\r\n                                {t('plsInputAccount')} {/* 請輸入Email作為登入帳號 */}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"profile-item-row\">\r\n                            <div className=\"item-title\">\r\n                                {t('userPassword')} {/* 用戶密碼 */}\r\n                            </div>\r\n                            <div className=\"item-content\">\r\n                                <InputText value={password} onUpdate={setPassword}></InputText>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"profile-item-row\">\r\n                            <div className=\"item-title\">\r\n                                {t('userName')} {/* 用戶名稱 */}\r\n                            </div>\r\n                            <div className=\"item-content\">\r\n                                <InputText value={userName} onUpdate={setUserName}></InputText>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"profile-item-row\">\r\n                            <div className=\"item-title\">\r\n                                {t('industry')} {/* 產業 */}\r\n                            </div>\r\n                            <div className=\"item-content\">\r\n                                <Select value={industry} optionList={industryOptionList}\r\n                                    onUpdate={setIndustry} loading={industryOptionListLoading}></Select>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"profile-item-row\">\r\n                            <div className=\"item-title\">\r\n                                {t('phone')} {/* 聯繫電話 */}\r\n                            </div>\r\n                            <div className=\"item-content\">\r\n                                <InputText value={phone} onUpdate={setPhone}></InputText>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"profile-item-row\">\r\n                            <div className=\"item-title\">\r\n                                {t('comment')}{/* 備註 */}\r\n                            </div>\r\n                            <div className=\"item-content\">\r\n                                <InputText value={comment} onUpdate={setComment}></InputText>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"profile-item-row\">\r\n                            <div className=\"item-title\">\r\n                                {t('agent')} {/* 所屬代理商 */}\r\n                            </div>\r\n                            <div className=\"item-content\">\r\n                                <InputText value={agent} onUpdate={setAgent}></InputText>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"profile-item-row\">\r\n                            <div className=\"item-title\">\r\n                                {t('sales')} {/* 所屬業務 */}\r\n                            </div>\r\n                            <div className=\"item-content\">\r\n                                <InputText value={sales} onUpdate={setSales}></InputText>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"manage-user-auth\" style={{\r\n                        display: tabStatus === 'userAuth' ? 'flex' : 'none',\r\n                    }}>\r\n                        <Table header={userAuthTableHeader} data={userAuthTableData} view={{\r\n                            panel: false,\r\n                        }} onPageChange={userAuthTableChange}>\r\n                        </Table>\r\n                    </div>\r\n                    <div className=\"manage-module-auth\" style={{\r\n                        display: tabStatus === 'moduleAuth' ? 'flex' : 'none',\r\n                    }}>\r\n                        <Table header={moduleAuthTableHeader} data={moduleAuthTableData}>\r\n                        </Table>\r\n                    </div>\r\n                    <div className=\"save-button-row\">\r\n                        <Button type=\"fill\" onClick={saveUser()}>\r\n                            {t('save')}  {/* 儲存 */}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nconst ManageUserModalInnerStyled = styled(ManageUserModal)`\r\ndisplay: flex;\r\nflex-direction: column;\r\nwidth: 700px;\r\n/* height: 700px; */\r\nmin-height: 700px;\r\n\r\n    .manage-user-title {\r\n        display: flex;\r\n        flex-direction: row;\r\n        width: 100%;\r\n        /* margin: 0.5rem 1rem; */\r\n\r\n        margin-top: 0.5rem;\r\n        padding: 0.5rem 1rem;\r\n        box-sizing: border-box;\r\n\r\n        /* background-color: #c2c2c2; */\r\n    }\r\n\r\n    .manager-user-container {\r\n        display: flex;\r\n        flex-direction: column;\r\n        \r\n        width: 100%;\r\n        margin: 0.5rem 1rem;\r\n\r\n        /* padding: 1rem; */\r\n\r\n        .manager-user-tab-row {\r\n            display: flex;\r\n            flex-direction: row;\r\n            justify-content: flex-start;\r\n            align-items: center;\r\n            .manager-user-tab {\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n\r\n                /* padding: 0.5rem 1rem; */\r\n\r\n                width: 100px;\r\n                height: 38px;\r\n\r\n                cursor: pointer;\r\n                /* box-sizing: border-box; */\r\n            }\r\n            .manager-user-tab.active {\r\n                border-bottom: 4px solid ${fetchTheme('tabBottom', '#1c7575')};\r\n                /* background-color: red; */\r\n                transform: translateY(2px);\r\n            }\r\n        }\r\n\r\n        /* 基本資料 */\r\n        .manage-user-profile {\r\n            display: flex;\r\n            flex-direction: column;\r\n\r\n            margin-top: 30px;\r\n\r\n            .profile-item-row {\r\n                display: flex;\r\n                flex-direction: row;\r\n                .item-title {\r\n                    width: 180px;\r\n                    display: flex;\r\n                    flex-direction: row;\r\n                    justify-content: flex-end;\r\n                    margin: 0.5rem 0.5rem;\r\n                }\r\n                .item-content {\r\n                    margin: 0.5rem 0.5rem;\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        /* 用戶權限 */\r\n        .manage-user-auth {\r\n\r\n        }\r\n\r\n        /* 模組權限 */\r\n        .manage-module-auth {\r\n\r\n        }\r\n\r\n        .save-button-row {\r\n            display: flex;\r\n            flex-direction: row;\r\n\r\n            justify-content: center;\r\n            align-items: center;\r\n            \r\n        }\r\n        \r\n    }\r\n\r\n`\r\n\r\n\r\n\r\nexport default ManageUserModalInnerStyled;","/** @jsxImportSource @emotion/react */\r\nimport { jsx } from '@emotion/react'\r\n\r\nimport { css } from '@emotion/react'\r\nimport styled from '@emotion/styled'\r\n\r\nimport { useSearchParams, useNavigate } from \"react-router-dom\";\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport ApiSender, { ApiError } from \"apiSender\"; // 載入 /src/apiSender/index.js\r\n\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { PageTitle } from \"module/layout\"\r\n\r\nimport InputText from \"component/InputText\";\r\nimport FilterPanel from \"component/FilterPanel\"\r\nimport { FilterPanelDash } from \"component/FilterPanel\"\r\nimport DatePicker from \"component/DatePicker\"\r\nimport Button from \"component/Button\"\r\n\r\nimport Table from \"component/Table\"\r\n\r\nimport ManageUserModal from \"element/Users/ManageUserModal\"\r\n\r\nimport Notification from \"component/Notification\"\r\n\r\nimport { modal as modalThemeObject } from 'theme/reas'\r\nimport TableHeader from \"util/TableHeader\"\r\n\r\nimport IndustryFilter from \"filter/IndustryFilter\"\r\nimport TimeFilter from \"filter/TimeFilter\";\r\nimport RoleFilter from \"filter/RoleFilter\";\r\n\r\nimport { UserManageFlow } from \"flow/users\"\r\n\r\nimport { useUrlQuery } from \"util/UrlQuery\";\r\nimport { UserManageModel } from 'fragment/Users';\r\nimport { TableSelectModeEnum } from 'enum/Table';\r\n\r\nlet industryFilter = new IndustryFilter('industry');\r\nlet dateFilter = new TimeFilter('date', '-');\r\n// dateFilter.setDefaultOutput('')\r\n\r\nconst UsersFilterPanel = () => {\r\n    // const inputTextPanelStyle = {\r\n    //     height: '2.3rem',\r\n    //     width: '220px',\r\n    //     marginLeft: '0.5rem',\r\n    //     marginRight: '0.5rem',\r\n    //     marginTop: '0.5rem',\r\n    //     marginBottom: '0.5rem'\r\n    // };\r\n    const [userName, setUserName] = useState('');\r\n    const [account, setAccount] = useState('');\r\n    const [startDate, setStartDate] = useState(null);\r\n    const [endDate, setEndDate] = useState(null);\r\n\r\n    const handleQuery = () => () => {\r\n        console.log('handleQuery', userName, account, startDate, endDate)\r\n    }\r\n\r\n    const { t } = useTranslation('users', { keyPrefix: 'panel' });\r\n\r\n    return (\r\n        <FilterPanel>\r\n            {/*用戶名稱*/}\r\n            <InputText placeholder={t('userName')} pattern=\"query\" value={userName} onUpdate={setUserName} />\r\n            {/*帳號*/}\r\n            <InputText placeholder={t('account')} pattern=\"query\" value={account} onUpdate={setAccount} />\r\n\r\n            {/*開始日期*/}\r\n            <DatePicker placeholder={t('startDate')} pattern=\"query\" onUpdate={setStartDate}></DatePicker>\r\n\r\n            <FilterPanelDash>-</FilterPanelDash>\r\n            {/*結束日期*/}\r\n            <DatePicker placeholder={t('endDate')} pattern=\"query\" onUpdate={setEndDate}></DatePicker>\r\n            {/* 篩選 */}\r\n            <Button type=\"fill\" mode=\"default\" pattern=\"query\" onClick={handleQuery()}>{t('query')}</Button>\r\n        </FilterPanel>\r\n    );\r\n}\r\n\r\nconst UsersTable = ({ fetchControl, control, model }) => {\r\n    // userRefreshTrigger\r\n    if (!(model instanceof UserManageModel)) {\r\n        console.error(`model is not UserManageModel`);\r\n        return (<div></div>)\r\n    }\r\n    if (!(control instanceof UserManageFlow)) {\r\n        console.error(`control is not UserManageFlow`);\r\n        return (<div></div>)\r\n    }\r\n\r\n    const { t } = useTranslation('users', { keyPrefix: 'table' });\r\n\r\n    const tableHeader = model.getState('tableHeader');\r\n    /*\r\n    const tableHeader = new TableHeader({\r\n        rowSelect: {\r\n            // mode: 'singleSelect', // 代表只能單選\r\n            mode: TableSelectModeEnum.multi,\r\n        },\r\n        upperHeader: {\r\n            bindUserNum: { // <key>\r\n                // key: 'bindUserNum',\r\n                label: t('bindedUserNum'), // '已綁定用戶數',\r\n                type: 'upperHeader'// 這個欄位會是上層header，不會被算做資料欄\r\n            },\r\n        },\r\n        headerExtra: [{ // 額外要載入的欄位\r\n            key: 'accountId',\r\n            fetch: 'account.id',\r\n        }, {\r\n            key: 'accountEntityId',\r\n            fetch: 'entity.id',\r\n        }],\r\n        buttonColumn: {\r\n            action: { // <key> ==> 'action'\r\n                buttonItemList: [{\r\n                    type: 'button',\r\n                    label: t('edit'), // '編輯',\r\n                    event: 'edit',\r\n                    buttonType: 'fill',\r\n                    buttonMode: 'primary',\r\n                    buttonPattern: 'buttonColumn',\r\n                    visibleChecker: function (rowData) {\r\n                        return true;\r\n                    },\r\n                }, {\r\n                    type: 'button',\r\n                    label: t('module'), // '模組',\r\n                    event: 'module',\r\n                    buttonType: 'fill',\r\n                    buttonMode: 'primary',\r\n                    buttonPattern: 'buttonColumn',\r\n                }],\r\n            }\r\n        },\r\n        header: [{\r\n            label: '',\r\n            key: '__rowSelect', // '__rowSelect'==>代表和 __rowSelect 連動\r\n            type: 'checkBox',\r\n            // mode: 'singleSelect', // checkBox已和 '__rowSelect' 掛鉤的情況下，這邊的mode沒有效果\r\n        }, {\r\n            label: t('userName'), //  '用戶名稱',\r\n            key: 'userName',\r\n            type: 'text',\r\n            fetch: 'account.username',\r\n        }, {\r\n            label: t('account'), //  '帳號',\r\n            key: 'account',\r\n            type: 'text',\r\n            fetch: 'account.email',\r\n        }, {\r\n            label: t('industry'), //  '產業',\r\n            key: 'industry',\r\n            type: 'text',\r\n            // filter: 'industry', // 自動採用指定filter函式\r\n            // fetch: 'entity.industry.name',\r\n            filter: industryFilter,\r\n            fetch: 'entity.industry.id',\r\n        }, {\r\n            label: t('userRole'), //  '用戶角色',\r\n            key: 'userRole',\r\n            type: 'text',\r\n            filter: new RoleFilter('roleName'),\r\n            fetch: 'account.role',\r\n        }, {\r\n            label: t('createTime'), //  '創建時間',\r\n            key: 'createTime',\r\n            type: 'text',\r\n            filter: 'time',\r\n            fetch: 'account.createdAt',\r\n        }, {\r\n            label: t('subAccountNum'), //  '子帳號數',\r\n            key: 'subUserNum',\r\n            type: 'text',\r\n            fetch: 'entity.numOfSubAccounts',\r\n        }, {\r\n            label: 'LINE@', // 已綁定用戶數 - LINE@\r\n            key: 'lineAtUserNum',\r\n            type: 'text',\r\n            upperHeaderRef: 'bindUserNum', // 指定上層的欄位\r\n            fetch: 'entity.platforms',\r\n            filter: new ArrayFilter('objectArray', 'name', 'LINE', 'numOfFans'),\r\n            // { \"name\": \"Facebook\", \"numOfFans\": 0 } ==> 0\r\n        }, {\r\n            label: 'FB',\r\n            key: 'fbUserNum',\r\n            type: 'text',\r\n            upperHeaderRef: 'bindUserNum', // 指定上層的欄位\r\n            fetch: 'entity.platforms',\r\n            filter: new ArrayFilter('objectArray', 'name', 'Facebook', 'numOfFans'),\r\n        }, {\r\n            label: 'IG',\r\n            key: 'igUserNum',\r\n            type: 'text',\r\n            upperHeaderRef: 'bindUserNum', // 指定上層的欄位\r\n            fetch: 'entity.platforms',\r\n            filter: new ArrayFilter('objectArray', 'name', 'Instagram', 'numOfFans'),\r\n        }, {\r\n            label: t('quotaPlan'), //  '用量方案',\r\n            key: 'quantityPlan',\r\n            type: 'text',\r\n            fetch: 'entity.program.quota',\r\n            filter: function (val) {\r\n                return val == null ? '-' : val;\r\n            },\r\n        }, {\r\n            label: t('expiredTime'), //  '到期時間',\r\n            key: 'expiredTime',\r\n            type: 'text',\r\n            fetch: 'entity.program.dueDate',\r\n            filter: dateFilter,\r\n        }, {\r\n            label: t('overQuotaUserNum'), //  '超量人數',\r\n            key: 'overUserNum',\r\n            type: 'text',\r\n            fetch: 'entity.program',\r\n            filter: function (program) {\r\n                //  program: {\r\n                //     \"quota\": null,\r\n                //     \"usage\": null,\r\n                //     \"dueDate\": null\r\n                // }\r\n                if (!program) {\r\n                    return '';\r\n                }\r\n\r\n                if (!program.quota || !program.usage) {\r\n                    return '-';\r\n                }\r\n\r\n                return Math.max(program.usage - program.quota, 0);\r\n            },\r\n        }, {\r\n            label: t('enableOrDisable'), //  '開通/停用',\r\n            key: 'accountEnable',\r\n            type: 'toggleSwitch',\r\n            fetch: 'account.enabled',\r\n            // filter: function (enabled) {\r\n            //     // 還要再串上參數\r\n            //     return true;\r\n            // }\r\n        }, {\r\n            label: t('action'), //  '操作',\r\n            key: 'action',\r\n            type: 'buttonColumn',\r\n            buttonColumnRef: 'action',\r\n            width: '300px',\r\n        }],\r\n    }); */\r\n\r\n    // const urlQuery = useUrlQuery();\r\n    // // console.log('registRef urlQuery', urlQuery)\r\n    // control.registRef('urlQuery', urlQuery);\r\n\r\n    // new TableData(null, 'default').applyUrlQueryParam(urlQuery)\r\n    const [tableData, setTableData] = useState(model.getState('tableData'));\r\n    let actTableData = model.reactive('tableData', 'UsersUserTable', setTableData);\r\n\r\n    /*\r\n    function loadUsers(newPage, unlock) {\r\n\r\n        // 讓industryFilter內部自動呼叫API來初始化參數\r\n        industryFilter.autoReady().then(() => {\r\n\r\n            return ApiSender.sendApi('[get]/account-entities', {\r\n                page: newPage, // API的page參數從1開始\r\n                pageSize: tableData.getPageSize(), // 使用當前設定的pageSize呼叫API\r\n            });\r\n        }).then((apiRes) => {\r\n            // 將newTableData內的page參數更新到urlQuery上\r\n            actTableData(new TableData(apiRes, 'crossbot', tableHeader).navigateUrlQuery(urlQuery));\r\n            unlock();\r\n        }).catch(new ApiError(function (error, next) {\r\n            unlock();\r\n            next(); // 開啟Alert燈箱\r\n        }).catchAlertMsg());\r\n    }\r\n    */\r\n\r\n\r\n    // 註冊進ref，讓control可以直接呼叫loadUser\r\n    // control.registRef('loadUser', loadUsers);\r\n\r\n    // 換頁事件，代表要load新的頁面\r\n    // const onPageChange = function () {\r\n    //     control.onPageChange();\r\n    // };\r\n    // const onPageChange = function () {\r\n    //     return loadUsers.bind(null);\r\n    // }\r\n\r\n    // // 刷新User表格\r\n    // useEffect(function () {\r\n    //     // 初始化 & Trigger刷新當前頁面\r\n    //     loadUsers(tableData.getNowPage(), () => { });\r\n    // }, [userRefreshTrigger]);\r\n\r\n    const onCheckedChange = () => (checked, cellInfo, cellMap) => {\r\n\r\n        const headerKey = cellInfo.getHeaderKey();\r\n        if (headerKey === '__rowSelect') {\r\n            // 預設的列選取\r\n            control.onRowSelectCheckedChange(checked, cellInfo, cellMap);\r\n        } else if (headerKey === 'accountEnable') {\r\n            control.onToggleSwitchChange(checked, cellInfo, cellMap);\r\n        }\r\n    }\r\n\r\n    const onButtonClick = () => (event, cellInfo) => {\r\n        if (event === 'edit') {\r\n            control.onCellButtonClickEdit(cellInfo);\r\n        } else if (event === 'module') {\r\n            control.onCellButtonClickModule(cellInfo);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Table header={tableHeader} data={tableData} onCheckedChange={onCheckedChange()} onPageChange={control.bindAct('onPageChange')}\r\n            pageChangeLock onButtonClick={onButtonClick()}>\r\n            <Button type=\"table\" mode=\"default\" onClick={control.bindAct('onClickAddUser')}>{t('addUser')}</Button>\r\n            <Button type=\"table\" mode=\"default\" onClick={control.bindAct('onClickRemoveUser')}\r\n                disabled={model.fetchRef('removeBtnDisabled', 'UsersTable')} srcKey=\"removeUserButton\">{t('removeUser')}</Button>\r\n        </Table>\r\n    );\r\n}\r\n\r\n\r\nfunction UsersPage({ fetchControl, userManageControl, userManageModel }) {\r\n    const translationMenu = useTranslation('menu', { keyPrefix: 'system' });\r\n    const { t } = useTranslation('users', { keyPrefix: 'manage' });\r\n\r\n\r\n    const urlQuery = useUrlQuery();\r\n    userManageControl.registRef('urlQuery', urlQuery);\r\n\r\n    useEffect(function () {\r\n        userManageControl.onMountUserTable();\r\n    }, [])\r\n\r\n    const [showTab, setShowTab] = useState('profile');\r\n\r\n    const onUserManageSave = modalType => () => {\r\n        if (modalType === 'add') {\r\n        } else if (modalType === 'edit') {\r\n            userManageControl.onSubmitEditUser();\r\n        }\r\n    }\r\n    return (\r\n        <PageTitle title={translationMenu.t('accountList')}>\r\n            <UsersFilterPanel></UsersFilterPanel>\r\n            <UsersTable fetchControl={fetchControl}\r\n                control={userManageControl} model={userManageModel}></UsersTable>\r\n\r\n            {/* \"新增用戶\" */}\r\n            <ManageUserModal modalType=\"add\" title={t('addUser')}\r\n                setOpenModalRef={userManageControl.bindRef('addUserModal')}\r\n                onSave={onUserManageSave('add')} theme={modalThemeObject}\r\n                industryOptionList={userManageModel.fetchRef('industryOptionList', 'ManageUserModalAdd')}\r\n                industryOptionListLoading={userManageModel.fetchRef('industryOptionListLoading', 'ManageUserModalAdd')}\r\n            ></ManageUserModal>\r\n            {/* \"編輯用戶\" */}\r\n            <ManageUserModal modalType=\"edit\" title={t('editUser')}\r\n                setOpenModalRef={userManageControl.bindRef('editUserModal')}\r\n                onSave={onUserManageSave('edit')} showTab={showTab}\r\n                theme={modalThemeObject}\r\n                industryOptionList={userManageModel.fetchRef('industryOptionList', 'ManageUserModalEdit')}\r\n                industryOptionListLoading={userManageModel.fetchRef('industryOptionListLoading', 'ManageUserModalEdit')}\r\n            ></ManageUserModal>\r\n        </PageTitle>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default function Users({ fetchControl }) {\r\n\r\n    const { t: userTableT } = useTranslation('users', { keyPrefix: 'table' });\r\n\r\n    const userManageModel = new UserManageModel(useRef(null), { t: userTableT });\r\n    const userManageControl = new UserManageFlow();\r\n    userManageControl.registModel('stateModel', userManageModel);\r\n    userManageControl.bindFetchControl(fetchControl);\r\n    userManageControl.registRef('userTableT', userTableT);\r\n\r\n    return (\r\n        <UsersPage fetchControl={fetchControl} userManageControl={userManageControl}\r\n            userManageModel={userManageModel}></UsersPage>\r\n    )\r\n}"],"names":["FilterPanelStyled","styled","LayoutMixin","getTheme","FilterPanel","children","pattern","patternObj","PatternStyleMixin","getPatternStyle","theme","layoutThemeObject","style","className","DashStyled","FilterPanelDash","height","marginBottom","marginLeft","marginRight","marginTop","fetchImportStyle","props","titleWidth","CheckBoxPatternStyleMixin","DefaultCheckBoxStyled","value","onUpdate","onClick","disabled","type","checked","onChange","e","fetchTheme","CheckBox","tableThemeObject","patternStyle","themeObject","_g","DefaultDropdownSelect","importStyle","qid","itemList","onItemChanged","show","onShowUpdate","useState","dropdownShow","setDropdownShow","useEffect","WindowCall","itemRowDomList","onDropdownItemClick","setChecked","stopPropagation","checkMap","setItemChecked","item","itemIndex","val","map","undefined","setItemCheckedFunc","bind","label","DefaultDropdownSelectStyled","layer","LayerMixin","TableHeaderSelect","uniqid","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgMenuDots","_ref","svgRef","title","titleId","xmlns","xmlnsXlink","id","x","y","viewBox","enableBackground","xmlSpace","width","ref","cx","cy","r","ForwardRef","paginationTheme","ThemeMixin","paginationThemeObject","PaginationStyled","page","setPage","totalPage","pageChangeLock","inputTextValue","setInputTextValue","lock","setLock","endLock","pageChange","pageNum","eventType","unlock","setTimeout","pageMove","action","onPageNumClick","pageItemList","push","alt","fill","pushPageNumItem","pushDotItem","dotKey","InputText","setValue","min","max","PaginationEx","setTotalPage","SvgSettingsSliders","d","_path","_path2","SvgRrEdit","SvgBrCheckbox","filterMap","industry","industryKey","row","index","catering","warehousing","logistics","ecommerce","software","decimalSeparator","text","replace","match","capture","nowNumStr","newNumStr","numPartStr","slice","digitText","len","num","timeFilterMap","time","isoString","Date","getFullYear","getMonth","getDate","CellFilter","filterKey","headerItem","outText","transform","transformFunc","console","error","filter","filterFunc","getFilter","Filter","CustomFilter","filt","CellInfo","rowIndex","colIndex","rowChecked","originRow","__originRow","__rowSelect","tableTheme","TableHeaderBlock","header","showColMap","upperHeaderMap","upperHeaderExist","upperHeader","upperHeaderList","hedderList","getThClassName","thType","colLen","classNameStr","forEach","colArr","upperHeaderRef","showCol","upperHeaderItem","get","display","showUpperCol","colSpan","upperColSpan","delete","minWidth","rowSpan","TdTextEditable","tdStyle","tdClassName","onEdit","cellInfo","showInput","setShowInput","tdValueOrigin","tdValue","setTdValue","onClickOk","onEnter","TdText","onTdEdit","transformCell","filtCell","textType","linkUrl","linkHeaderRef","window","open","TdCheckBox","checkMapMap","onCheckedChange","tableData","defaultChecked","getRowChecked","getHeaderItem","getRowIndex","getRow","autoGetCheckMap","setDisabled","set","cm","CellMap","setIndexChecked","TdToggleSwitch","onCheckedUpdate","ToggleSwitch","TableRow","rowHoverIndex","setRowHoverIndex","headerItemList","rowArr","trMouseLeaveTimeoutRef","onButtonClick","onImageClick","log","getTdClassName","rowLen","headerItemType","rowSelectCheckedUpdateFunc","handleTrHover","current","clearTimeout","timeoutCallback","colList","handleButtonClick","buttonItem","event","defaultRowSelectHeaderItem","getDefaultRowSelectHeaderItem","rowSelectCheckMap","tdClassNameGenFunc","imgUrl","imgStyle","src","clickable","onImgClick","defaultDisabled","handleSetChecked","selectMode","TableSelectModeEnum","excludeSetDisabled","setCheckedFunc","checkedUpdateFunc","genCheckedState","getCellValue","buttonItemList","btnList","buttonColumn","Button","buttonType","mode","buttonMode","buttonPattern","checkRowSelectEnable","getDefaultRowSelectCheckMap","getRowDisabled","newChecked","setRowChecked","onRowClick","onMouseEnter","onMouseLeave","Symbol","iterator","checkMapObj","cellList","CheckMap","TableData","checkObj","data","next","done","checkObjMap","enumerate","iterable","f","arr","Array","obj","selfIndex","callback","checkMapRowIndex","runCheckMapExcludeSelfIndex","CheckMapMap","Map","headerKey","newCheckMap","resetAllChecked","LoadingStyled","TableLoading","loading","CircularProgress","sx","color","TableBody","useRef","rowList","getTableData","setTableData","convertLoading","Ref","getValue","nowLoading","setLoading","actLoading","reactive","TablePagination","getNowPage","nowPage","setNowPage","getTotalPage","TableBlock","onPageChange","footerSlot","view","TableHeader","showColList","headerSelectItemList","showColItem","setShowCol","tablePaginationRow","subHeaderColIndexList","lowerHeaderList","subItem","subHeaderNum","setShowUpperCol","setUpperColSpan","refreshShowUpperColFunc","updateColIndex","updateShowCol","upperShow","upperSpanCount","getPaginationShow","resetAllCheckMap","blockName","defaultVal","tableHeaderSelectShow","setTableHeaderSelectShow","TableStyled","importClass","Table","setOpenModalRef","onSave","showTab","modalType","industryOptionList","industryOptionListLoading","t","useTranslation","keyPrefix","dispatch","useDispatch","account","useSelector","selectAccount","password","selectPassword","userName","selectUserName","selectIndustry","phone","selectPhone","comment","selectComment","agent","selectAgent","sales","selectSales","tabStatus","setTabStatus","changeTab","tab","pt","userAuthTableHeader","resourceName","systemPermissionList","selectSystemPermissionList","systemAuthTablePageSize","selectSystemAuthTablePageSize","userAuthTableDataInit","selectSystemAuthTablePage","pageSize","userAuthTableData","moduleAuthTableHeader","moduleAuthTableData","moduleName","category","startTime","endTime","accountEnable","Modal","childRef","modalWidth","modalHeight","updateAccount","updatePassword","updateUserName","Select","optionList","updateIndustry","updatePhone","updateComment","updateAgent","updateSales","panel","newPage","updateSystemAuthTablePage","UsersFilterPanel","IndustryFilter","TimeFilter","setUserName","setAccount","startDate","setStartDate","endDate","setEndDate","placeholder","DatePicker","UsersTable","fetchControl","control","model","UserManageModel","UserManageFlow","tableHeader","getState","cellMap","getHeaderKey","onRowSelectCheckedChange","onToggleSwitchChange","bindAct","onCellButtonClickEdit","onCellButtonClickModule","fetchRef","srcKey","UsersPage","userManageControl","userManageModel","translationMenu","urlQuery","useUrlQuery","registRef","onMountUserTable","onUserManageSave","onSubmitEditUser","bindRef","modalThemeObject","Users","userTableT","registModel","bindFetchControl"],"sourceRoot":""}